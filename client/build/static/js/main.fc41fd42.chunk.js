(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{19:function(e,t,c){},20:function(e,t,c){},21:function(e,t,c){},29:function(e,t,c){},30:function(e,t,c){},35:function(e,t,c){},36:function(e,t,c){},37:function(e,t,c){},38:function(e,t,c){},39:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c(1),s=c.n(a),i=c(22),r=c.n(i),l=(c(29),c(2)),o=(c(30),c(5)),j=c(4),d=function(){var e=Object(a.useContext)(_),t=e.state,c=e.dispatch,s=Object(a.useState)(""),i=Object(l.a)(s,2),r=i[0],o=i[1],d=Object(a.useState)([]),h=Object(l.a)(d,2),u=h[0],b=h[1],O=Object(a.useState)(!1),m=Object(l.a)(O,2),f=m[0],x=m[1],g=function(e){console.log(e.target.value),o(e.target.value),""!==e.target.value.trim()&&fetch("/api/searchUser?name=".concat(e.target.value),{headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){b(e),console.log(e)})).catch((function(e){console.log(e)}))};return Object(n.jsx)("nav",{className:"white navbar",children:Object(n.jsxs)("div",{className:"nav-wrapper container-ig",children:[Object(n.jsx)(j.b,{className:"brand-logo",to:t?"/":"/login",children:"Instagram"}),Object(n.jsx)("ul",{id:"nav-mobile",className:"right hide-on-med-and-down",children:t?[Object(n.jsxs)("li",{className:"container-search",onFocus:function(){x(!0)},children:[Object(n.jsx)("input",{className:"search-user",placeholder:"T\xecm ki\u1ebfm",value:r,onChange:g}),Object(n.jsx)("div",{className:f?"container-user focus":"container-user",children:u.map((function(e,t){return Object(n.jsxs)(j.b,{to:"/profile/".concat(e._id),className:"person",onClick:function(){return x(!1)},children:[Object(n.jsx)("div",{className:"avatar",children:Object(n.jsx)("img",{src:e.urlAvatar,alt:"load..."})}),Object(n.jsxs)("div",{className:"info",children:[Object(n.jsx)("b",{children:e.nickname}),Object(n.jsx)("div",{children:e.name})]})]})}))}),Object(n.jsx)("div",{className:f?"backgroud-user focus":"backgroud-user",onClick:function(){return x(!1)}})]}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)(j.b,{to:"/profile",children:"Profile"})},"profile"),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)(j.b,{to:"/create",children:"Create Post"})},"create"),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)(j.b,{to:"/login",onClick:function(){localStorage.clear(),c({type:"LOGOUT"})},children:"\u0110\u0103ng xu\u1ea5t"})},"logout")]:[Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)(j.b,{to:"/signup",children:"Signup"})},"signup"),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)(j.b,{to:"/login",children:"Login"})},"login")]})]})})},h=(c(35),c(3)),u=c.n(h),b=(c(19),function(e){var t=Object(a.useContext)(_).state,c=Object(a.useState)(!1),s=Object(l.a)(c,2),i=s[0],r=s[1],o=Object(a.useState)(e.postFocus.postedBy.followers.includes(t._id)),d=Object(l.a)(o,2),h=d[0],u=d[1],b=function(){e.setOnModal(!1)};return Object(n.jsxs)("div",{className:"modal-post",children:[Object(n.jsx)("div",{className:"modal__overlay",onClick:b}),i?Object(n.jsxs)("ul",{children:[Object(n.jsxs)("li",{children:[Object(n.jsx)("div",{className:"header__message",children:"Xo\xe1 b\xe0i vi\u1ebft?"}),Object(n.jsx)("p",{className:"body__message",children:"N\u1ebfu b\u1ea1n kh\xf4ng mu\u1ed1n xo\xe1 b\xe0i vi\u1ebft n\xe0y, b\u1ea1n c\xf3 th\u1ec3 l\u01b0u tr\u1eef b\xe0i vi\u1ebft. Ch\u1ec9 b\u1ea1n m\u1edbi c\xf3 th\u1ec3 xem b\xe0i vi\u1ebft."})]}),Object(n.jsx)("li",{onClick:function(){e.deletePost(e.idFocus),b()},className:"warnning",children:"Xo\xe1"}),Object(n.jsx)("li",{onClick:b,children:"Hu\u1ef7"})]}):Object(n.jsxs)("ul",{children:[Object(n.jsx)("li",{className:"warnning",children:"B\xe1o c\xe1o"}),e.isPostedByUser?[Object(n.jsx)("li",{className:"warnning",onClick:function(){return r(!0)},children:"Xo\xe1"},"delete"),Object(n.jsx)("li",{children:Object(n.jsx)(j.b,{to:"/updatepost/"+e.idFocus,children:"Ch\u1ec9nh s\u1eeda b\xe0i vi\u1ebft"})},"update")]:h?Object(n.jsx)("li",{className:"bo-theo-doi",onClick:function(){fetch("/api/unfollow",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({unFollowId:e.postFocus.postedBy._id})}).then((function(e){return e.json()})).then((function(e){if(e.error)return console.log(e.error)})).catch((function(e){console.log(e)})),u(!1)},children:"B\u1ecf theo d\xf5i"}):Object(n.jsx)("li",{className:"theo-doi",onClick:function(){fetch("/api/follow",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({followId:e.postFocus.postedBy._id})}).then((function(e){return e.json()})).then((function(e){})).catch((function(e){console.log(e)})),u(!0)},children:"Theo d\xf5i"}),Object(n.jsx)("li",{children:"Chia s\u1ebb"}),Object(n.jsx)("li",{onClick:b,children:"Hu\u1ef7"})]})]})}),O=function(e){var t=Object(a.useState)(!1),c=Object(l.a)(t,2),s=c[0],i=c[1],r=function(){e.setOnCommentModal(!1)};return Object(n.jsxs)("div",{className:"modal-post",children:[Object(n.jsx)("div",{className:"modal__overlay",onClick:r}),s?Object(n.jsxs)("ul",{children:[Object(n.jsxs)("li",{children:[Object(n.jsx)("div",{className:"header__message",children:"Xo\xe1 comment"}),Object(n.jsxs)("p",{className:"body__message",children:["B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n xo\xe1 comment n\xe0y?!! ",Object(n.jsx)("br",{}),"Sau khi xo\xe1 s\u1ebd kh\xf4ng th\u1ec3 kh\xf4i ph\u1ee5c l\u1ea1i."]})]}),Object(n.jsx)("li",{onClick:function(){e.deleteComment(e.idFocus,e.cmtIndex),r()},className:"warnning",children:"Xo\xe1"}),Object(n.jsx)("li",{onClick:r,children:"Hu\u1ef7"})]}):Object(n.jsxs)("ul",{children:[Object(n.jsx)("li",{className:"warnning",onClick:function(){return i(!0)},children:"Xo\xe1"}),Object(n.jsx)("li",{onClick:r,children:"Hu\u1ef7"})]})]})},m=c(11),f=(c(36),function(e){var t=Object(a.useContext)(_).state,c=Object(a.useState)(e.followers.includes(t._id)),s=Object(l.a)(c,2),i=s[0],r=s[1];return Object(n.jsxs)("div",{className:"goiY",children:[Object(n.jsxs)("div",{className:"person",children:[Object(n.jsx)("div",{className:"avatar",children:Object(n.jsx)("img",{src:e.urlAvatar,alt:"load..."})}),Object(n.jsxs)("div",{className:"info",children:[Object(n.jsx)(j.b,{to:"/profile/".concat(e._id),children:Object(n.jsx)("b",{children:e.nickname})})," ",Object(n.jsx)("br",{}),Object(n.jsx)("span",{children:e.name})]})]}),i?Object(n.jsx)("div",{className:"bo-theo-doi",onClick:function(t){fetch("/api/unfollow",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({unFollowId:e._id})}).then((function(e){return e.json()})).then((function(e){e?e.error?console.log("Unfollow Error!"):console.log("Unfollow success!"):console.log("Unfollow Error!")})).catch((function(e){console.log(e)})),r(!1)},children:"B\u1ecf theo d\xf5i"}):Object(n.jsx)("div",{className:"theoDoi",onClick:function(t){fetch("/api/follow",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({followId:e._id})}).then((function(e){return e.json()})).then((function(e){e?e.error?console.log("Follow Error!"):console.log("Follow success!"):console.log("Follow Error!")})).catch((function(e){console.log(e)})),r(!0)},children:"Theo d\xf5i"})]})}),x=function(){var e=Object(a.useState)(null),t=Object(l.a)(e,2),c=t[0],s=t[1];return Object(a.useEffect)((function(){fetch("/api/randomuser?amount=3",{method:"get",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){s(e)})).catch((function(e){return console.log(e)}))}),[]),Object(n.jsxs)("div",{className:"Ads",children:[Object(n.jsxs)("div",{className:"personal-page",children:[Object(n.jsx)("div",{className:"avatar",children:Object(n.jsx)("img",{src:"img/info.jpg",alt:"bug"})}),Object(n.jsxs)("div",{className:"info",children:[Object(n.jsx)("b",{children:"longnguyen.442"})," ",Object(n.jsx)("br",{}),Object(n.jsx)("span",{children:"Long Nguy\u1ec5n"})]})]}),Object(n.jsxs)("div",{className:"story khung",children:[Object(n.jsxs)("div",{className:"headerOfKhung",children:[Object(n.jsx)("div",{children:"Tin"}),Object(n.jsx)("div",{children:"Xem t\u1ea5t c\u1ea3"})]}),Object(n.jsxs)("div",{className:"tin",children:[Object(n.jsx)("div",{className:"border-avatar",children:Object(n.jsx)("div",{className:"avatar",children:Object(n.jsx)("img",{src:"img/1.jpg",alt:"bug"})})}),Object(n.jsxs)("div",{className:"info",children:[Object(n.jsx)("b",{children:"diep_bosua_"})," ",Object(n.jsx)("br",{}),Object(n.jsx)("span",{children:"20 PH\xdaT TR\u01af\u1edaC"})]})]}),Object(n.jsxs)("div",{className:"tin",children:[Object(n.jsx)("div",{className:"border-avatar",children:Object(n.jsx)("div",{className:"avatar",children:Object(n.jsx)("img",{src:"img/2.jpg",alt:"bug"})})}),Object(n.jsxs)("div",{className:"info",children:[Object(n.jsx)("b",{children:"kiimyen"})," ",Object(n.jsx)("br",{}),Object(n.jsx)("span",{children:"1 GI\u1edc TR\u01af\u1edaC"})]})]}),Object(n.jsxs)("div",{className:"tin",children:[Object(n.jsx)("div",{className:"border-avatar",children:Object(n.jsx)("div",{className:"avatar",children:Object(n.jsx)("img",{src:"img/3.jpg",alt:"bug"})})}),Object(n.jsxs)("div",{className:"info",children:[Object(n.jsx)("b",{children:"lananh11112000"})," ",Object(n.jsx)("br",{}),Object(n.jsx)("span",{children:"1 NG\xc0Y TR\u01af\u1edaC"})]})]})]}),Object(n.jsxs)("div",{className:"suggestions khung",children:[Object(n.jsxs)("div",{className:"headerOfKhung",children:[Object(n.jsx)("div",{children:"G\u1ee3i \xfd cho b\u1ea1n"}),Object(n.jsx)("div",{children:"Xem t\u1ea5t c\u1ea3"})]}),c&&c.map((function(e){return Object(a.createElement)(f,Object(m.a)(Object(m.a)({},e),{},{key:e._id}))}))]}),Object(n.jsxs)("div",{className:"gioiThieu",children:[Object(n.jsxs)("ul",{children:[Object(n.jsx)("li",{children:Object(n.jsx)("a",{href:"/",children:"Gi\u1edbi thi\u1ec7u"})}),Object(n.jsx)("li",{children:Object(n.jsx)("a",{href:"/",children:"Tr\u1ee3 gi\xfap"})}),Object(n.jsx)("li",{children:Object(n.jsx)("a",{href:"/",children:"B\xe1o ch\xed"})}),Object(n.jsx)("li",{children:Object(n.jsx)("a",{href:"/",children:"API"})}),Object(n.jsx)("li",{children:Object(n.jsx)("a",{href:"/",children:"Vi\u1ec7c l\xe0m"})}),Object(n.jsx)("li",{children:Object(n.jsx)("a",{href:"/",children:"Quy\u1ec1n ri\xeang t\u01b0"})}),Object(n.jsx)("li",{children:Object(n.jsx)("a",{href:"/",children:"\u0110i\u1ec1u kho\u1ea3n"})}),Object(n.jsx)("li",{children:Object(n.jsx)("a",{href:"/",children:"V\u1ecb tr\xed"})}),Object(n.jsx)("li",{children:Object(n.jsx)("a",{href:"/",children:"T\xe0i kho\u1ea3n li\xean quan nh\u1ea5t"})}),Object(n.jsx)("li",{children:Object(n.jsx)("a",{href:"/",children:"Hashtag"})}),Object(n.jsx)("li",{children:Object(n.jsx)("a",{href:"/",children:"Ng\xf4n ng\u1eef"})})]}),Object(n.jsx)("div",{children:"\xa9 2020 INSTAGRAM FROM FACEBOOK"})]})]})},g=function(){var e=Object(a.useContext)(_).state,t=Object(a.useState)(null),c=Object(l.a)(t,2),s=c[0],i=c[1],r=Object(a.useState)(!1),o=Object(l.a)(r,2),d=o[0],h=o[1],m=Object(a.useState)(!1),f=Object(l.a)(m,2),g=f[0],p=f[1],v=Object(a.useState)(!1),N=Object(l.a)(v,2),y=N[0],S=N[1],w=Object(a.useState)(""),k=Object(l.a)(w,2),C=k[0],I=k[1],B=Object(a.useState)({}),A=Object(l.a)(B,2),T=A[0],F=A[1],z=Object(a.useState)(null),E=Object(l.a)(z,2),J=E[0],U=E[1];Object(a.useEffect)((function(){fetch("/api/subposts",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){e.error?console.log(e.error):e instanceof Array&&i(e)}))}),[]);var P=function(e){fetch("/api/like",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:e})}).then((function(e){return e.json()})).then((function(t){var c=s.map((function(c){return c._id===e?t:c}));i(c)}))},L=function(e,t){var c=e.target;c.classList.contains("far")?(P(t),c.className="fas fa-heart ani-scale1"):(!function(e){fetch("/api/unlike",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:e})}).then((function(e){return e.json()})).then((function(t){var c=s.map((function(c){return c._id===e?t:c}));i(c)}))}(t),c.className="far fa-heart")};return Object(n.jsx)(n.Fragment,{children:s?Object(n.jsxs)("div",{className:"home",children:[Object(n.jsx)("div",{className:"news-feed",children:s.map((function(t){var c="far fa-heart",a=e._id;return t.likes.includes(a)&&(c="fas fa-heart ani-scale1"),Object(n.jsxs)("div",{className:"card home-card",children:[Object(n.jsxs)("div",{className:"nav-card",children:[Object(n.jsxs)("div",{className:"nav-card-info",children:[Object(n.jsx)(j.b,{to:t.postedBy._id===a?"/profile":"/profile/"+t.postedBy._id,children:Object(n.jsxs)("div",{className:"info_posted",children:[Object(n.jsx)("div",{className:"avatar",children:Object(n.jsx)("img",{src:t.postedBy.urlAvatar,alt:"bug"})}),Object(n.jsx)("div",{className:"info",children:Object(n.jsx)("b",{children:t.postedBy.name})})]})}),t.title&&Object(n.jsx)("span",{children:t.title})]}),Object(n.jsx)("i",{className:"fas fa-ellipsis-h",onClick:function(){return function(t){var c=t._id,n=t.postedBy._id;I(c),F(t),n===e._id?S(!0):S(!1),h(!0)}(t)}})]}),Object(n.jsxs)("div",{className:"card-image",onDoubleClick:function(){return function(e){var t=document.getElementById(e);P(e),t.className="fas fa-heart ani-scale1";var c=document.getElementById("idHeart"+e);c.style.display="block",setTimeout((function(){return c.style.display="none"}),1500)}(t._id)},children:[Object(n.jsx)("img",{src:t.photoUrl,alt:"load err"}),Object(n.jsx)("i",{className:"fas fa-heart iconHeart effect1",id:"idHeart"+t._id})]}),Object(n.jsxs)("div",{className:"listIcon",children:[Object(n.jsx)("i",{className:c,id:t._id,onClick:function(e){return L(e,t._id)}}),Object(n.jsx)("i",{className:"far fa-comment fa-flip-horizontal"}),Object(n.jsx)("i",{className:"far fa-paper-plane"}),Object(n.jsx)("i",{className:"far fa-bookmark"})]}),Object(n.jsxs)("div",{className:"countLike",children:[t.likes.length," l\u01b0\u1ee3t th\xedch"]}),Object(n.jsxs)("div",{className:"card-content",children:[Object(n.jsxs)("span",{className:"userName",children:[t.postedBy.name," "]}),Object(n.jsx)("span",{className:"postName",children:t.body}),t.comments.map((function(e,c){return Object(n.jsxs)("h6",{className:"post-comment",children:[Object(n.jsxs)("div",{className:"comment-container",children:[Object(n.jsxs)("span",{className:"userName",children:[e.postedBy.name," "]}),Object(n.jsx)("span",{className:"comment-text",children:e.text})]}),e.postedBy._id===a&&Object(n.jsx)("i",{className:"fas fa-ellipsis-h comment-icon",onClick:function(){p(!0),I(t._id),U(c)}})]},c)})),Object(n.jsx)("form",{onSubmit:function(e){var c,n;e.preventDefault(),c=e.target[0].value,n=t._id,fetch("/api/comment",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:n,text:c})}).then((function(e){return e.json()})).then((function(e){if(!e||e.error)return u.a.toast({html:e.error,classes:"#c62828 red darken-3"});var t=s.map((function(t){return t._id===e._id?e:t}));i(t)})).catch((function(e){console.log(e)})),e.target[0].value=""},children:Object(n.jsx)("input",{type:"text",placeholder:"add a comment"})})]})]},t._id)}))}),Object(n.jsx)("div",{className:"quang-cao",children:Object(n.jsx)("div",{className:"fixed",children:Object(n.jsx)(x,{})})}),d&&Object(n.jsx)(b,{setOnModal:h,isPostedByUser:y,deletePost:function(e){fetch("/api/deletepost/".concat(e),{method:"delete",headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(t){if(t.err)u.a.toast({html:t.error,classes:"#c62828 red darken-3"});else{var c=s.filter((function(t){return t._id!==e}));i(c),u.a.toast({html:"Delete success!",classes:"#43a047 green darken-1"})}}))},idFocus:C,postFocus:T}),g&&Object(n.jsx)(O,{setOnCommentModal:p,deleteComment:function(e,t){fetch("/api/uncomment",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:e,commentIndex:t})}).then((function(e){return e.json()})).then((function(t){if(!t||t.error)return u.a.toast({html:"delete failed!",classes:"#c62828 red darken-3"});var c=s.map((function(c){return c._id===e?t:c}));i(c)})).catch((function(e){u.a.toast({html:"delete failed!",classes:"#c62828 red darken-3"})}))},idFocus:C,cmtIndex:J})]}):Object(n.jsx)("div",{className:"progress",children:Object(n.jsx)("div",{className:"indeterminate"})})})},p=(c(20),function(){var e=Object(a.useState)(null),t=Object(l.a)(e,2),c=t[0],s=t[1],i=Object(a.useState)(null),r=Object(l.a)(i,2),o=r[0],d=r[1],h=Object(a.useContext)(_).state;return Object(a.useEffect)((function(){fetch("/api/user/".concat(h._id),{method:"get",headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){s(e.posts),d(e.user)})).catch((function(e){console.log(e)}))}),[]),Object(n.jsx)(n.Fragment,{children:c&&o?Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",margin:"18px 0px",padding:"15px",borderBottom:"1px solid #ccc"},children:[Object(n.jsxs)("div",{className:"khung-avatar",children:[Object(n.jsx)("img",{className:"avatar",src:o.urlAvatar,alt:"load error"}),Object(n.jsx)("span",{children:Object(n.jsx)(j.b,{to:"/changeAvatar",children:Object(n.jsx)("i",{className:"fas fa-camera"})})})]}),Object(n.jsxs)("div",{className:"thong-tin",children:[Object(n.jsx)("h4",{children:o.nickname}),Object(n.jsx)("h6",{children:o.name}),Object(n.jsxs)("div",{className:"so-luong",children:[Object(n.jsxs)("h6",{children:[c.length," b\xe0i vi\u1ebft"]}),Object(n.jsxs)("h6",{children:[o.followers.length," ng\u01b0\u1eddi theo d\xf5i"]}),Object(n.jsxs)("h6",{children:["\u0110ang theo d\xf5i ",o.following.length," ng\u01b0\u1eddi d\xf9ng"]})]})]})]}),Object(n.jsx)("div",{className:"gallery",children:Object(n.jsx)("div",{className:"row",children:c.map((function(e){return Object(n.jsx)("div",{className:"col s12 m6 l4",children:Object(n.jsx)("img",{className:"item",src:e.photoUrl,alt:"load error"})},e._id)}))})})]}):Object(n.jsx)("div",{className:"progress",children:Object(n.jsx)("div",{className:"indeterminate"})})})}),v=function(){var e=Object(a.useContext)(_).state,t=Object(a.useState)(null),c=Object(l.a)(t,2),s=c[0],i=c[1],r=Object(o.g)().id;Object(a.useEffect)((function(){fetch("/api/user/".concat(r),{method:"get",headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){e.error?u.a.toast({html:"Not found!",classes:"#c62828 red darken-3"}):i(e)})).catch((function(e){console.log(e)}))}),[]);return Object(n.jsx)(n.Fragment,{children:s?Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",margin:"18px 0px",padding:"15px",borderBottom:"1px solid #ccc"},children:[Object(n.jsx)("div",{className:"khung-avatar",ef:"/home",children:Object(n.jsx)("img",{className:"avatar",src:s.user.urlAvatar,alt:"load error"})}),Object(n.jsxs)("div",{className:"thong-tin",children:[Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{className:"follow-container",children:[Object(n.jsx)("h4",{children:s.user.nickname}),s.user.followers.includes(e._id)?Object(n.jsx)("div",{onClick:function(){fetch("/api/unfollow",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({unFollowId:r})}).then((function(e){return e.json()})).then((function(e){if(e.error)return console.log(e.error);var t=Object(m.a)({},s);t.user=e,i(t)})).catch((function(e){console.log(e)}))},className:"btnFollow btn-unfollow",children:"Unfollow"}):Object(n.jsx)("div",{onClick:function(){fetch("/api/follow",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({followId:r})}).then((function(e){return e.json()})).then((function(e){if(e&&!e.isFollowing){var t=Object(m.a)({},s);t.user=e,i(t)}})).catch((function(e){console.log(e)}))},className:"btnFollow btn-follow",children:"Follow"})]}),Object(n.jsx)("h6",{children:s.user.name})]}),Object(n.jsxs)("div",{className:"so-luong",children:[Object(n.jsxs)("h6",{children:[s.posts.length," b\xe0i vi\u1ebft"]}),Object(n.jsxs)("h6",{children:[s.user.followers.length," ng\u01b0\u1eddi theo d\xf5i"]}),Object(n.jsxs)("h6",{children:["\u0110ang theo d\xf5i ",s.user.following.length," ng\u01b0\u1eddi d\xf9ng"]})]})]})]}),Object(n.jsx)("div",{className:"gallery",children:Object(n.jsx)("div",{className:"row",children:s.posts.map((function(e){return Object(n.jsx)("div",{className:"col s12 m6 l4",children:Object(n.jsx)("img",{className:"item",src:e.photoUrl,alt:"load error"})},e._id)}))})})]}):Object(n.jsx)("div",{className:"progress",children:Object(n.jsx)("div",{className:"indeterminate"})})})},N=(c(37),function(){var e=Object(a.useContext)(_).state,t=Object(o.f)(),c=Object(a.useState)(""),s=Object(l.a)(c,2),i=s[0],r=s[1],d=Object(a.useState)(""),h=Object(l.a)(d,2),b=h[0],O=h[1],m=Object(a.useState)(""),f=Object(l.a)(m,2),x=f[0],g=f[1],p=Object(a.useState)(""),v=Object(l.a)(p,2),N=v[0],y=v[1],S=Object(a.useState)("Nam"),w=Object(l.a)(S,2),k=w[0],C=w[1],I=function(e){C(e.target.value)};return e&&t.push("/"),Object(n.jsxs)("div",{className:"card card-signup",children:[Object(n.jsx)("h1",{children:"Instagram"}),Object(n.jsx)("input",{type:"email",placeholder:"Email",value:N,onChange:function(e){return y(e.target.value)}}),Object(n.jsx)("input",{type:"text",placeholder:"T\xean \u0111\u1ea7y \u0111\u1ee7",value:i,onChange:function(e){return r(e.target.value)}}),Object(n.jsx)("input",{type:"text",placeholder:"T\xean ng\u01b0\u1eddi d\xf9ng",value:b,onChange:function(e){return O(e.target.value)}}),Object(n.jsx)("input",{type:"password",placeholder:"Password",value:x,onChange:function(e){return g(e.target.value)}}),Object(n.jsxs)("div",{className:"select-gender",children:[Object(n.jsx)("label",{children:"Gi\u1edbi t\xednh"}),Object(n.jsxs)("label",{children:[Object(n.jsx)("input",{className:"with-gap",name:"group1",type:"radio",value:"Nam",checked:"Nam"===k,onChange:I}),Object(n.jsx)("span",{children:"Nam"})]}),Object(n.jsxs)("label",{children:[Object(n.jsx)("input",{className:"with-gap",name:"group1",type:"radio",value:"Nu",checked:"Nu"===k,onChange:I}),Object(n.jsx)("span",{children:"N\u1eef"})]}),Object(n.jsxs)("label",{children:[Object(n.jsx)("input",{className:"with-gap",name:"group1",type:"radio",value:"Khac",checked:"Khac"===k,onChange:I}),Object(n.jsx)("span",{children:"Kh\xe1c"})]})]}),Object(n.jsx)("button",{className:"btn waves-effect waves-light #64b5f6 blue lighten-2 btn-signup",onClick:function(){!1!==/^[\w-.]+@([\w-]+\.)+[\w-]{2,4}$/.test(N)?i&&N&&x&&b?fetch("api/signup",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:i,nickname:b,email:N,password:x,selectedOption:k})}).then((function(e){return e.json()})).then((function(e){e.error?u.a.toast({html:e.error,classes:"#c62828 red darken-3"}):(u.a.toast({html:e.message,classes:"#43a047 green darken-1"}),t.push("/login"))})):u.a.toast({html:"Please add all the fields",classes:"#c62828 red darken-3"}):u.a.toast({html:"Invalid email",classes:"#c62828 red darken-3"})},children:"Signup"}),Object(n.jsx)("div",{className:"gach-ngang"}),Object(n.jsx)(j.b,{to:"/login",children:"B\u1ea1n \u0111\xe3 c\xf3 t\xe0i kho\u1ea3n?"})]})}),y=(c(38),function(){var e=Object(a.useContext)(_),t=e.state,c=e.dispatch,s=Object(o.f)(),i=Object(a.useState)(""),r=Object(l.a)(i,2),d=r[0],h=r[1],b=Object(a.useState)(""),O=Object(l.a)(b,2),m=O[0],f=O[1];return Object(a.useEffect)((function(){t&&s.push("/")}),[]),Object(n.jsxs)("div",{className:"card card-login",children:[Object(n.jsx)("h1",{children:"Instagram"}),Object(n.jsx)("input",{type:"email",placeholder:"Your email",value:m,onChange:function(e){return f(e.target.value)}}),Object(n.jsx)("input",{type:"password",placeholder:"Password",value:d,onChange:function(e){return h(e.target.value)}}),Object(n.jsx)("button",{className:"btn waves-effect waves-light #64b5f6 blue lighten-2 btn-login",onClick:function(e){e.target.classList.add("none-even");if(!1===/^[\w-.]+@([\w-]+\.)+[\w-]{2,4}$/.test(m))return u.a.toast({html:"Invalid email",classes:"#c62828 red darken-3"}),void e.target.classList.remove("none-even");fetch("/api/login",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:m,password:d})}).then((function(e){return e.json()})).then((function(t){t.error?(u.a.toast({html:t.error,classes:"#c62828 red darken-3"}),e.target.classList.remove("none-even")):(u.a.toast({html:"Login success",classes:"#43a047 green darken-1"}),localStorage.setItem("jwt",t.token),localStorage.setItem("user",JSON.stringify(t.user)),c({type:"USER",payload:t.user}),s.push("/"))}))},children:"Login"}),Object(n.jsx)("div",{className:"gach-ngang"}),Object(n.jsx)(j.b,{to:"/signup",children:"B\u1ea1n ch\u01b0a c\xf3 t\xe0i kho\u1ea3n?"})]})}),S=(c(21),function(){var e=Object(o.f)(),t=Object(a.useState)(""),c=Object(l.a)(t,2),s=c[0],i=c[1],r=Object(a.useState)(""),j=Object(l.a)(r,2),d=j[0],h=j[1],b=Object(a.useState)(null),O=Object(l.a)(b,2),m=O[0],f=O[1],x=Object(a.useState)({}),g=Object(l.a)(x,2),p=g[0],v=g[1];Object(a.useEffect)((function(){fetch("/api/user",{method:"get",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){v(e)})).catch((function(e){console.log(e)}))}),[]);return Object(n.jsxs)("div",{className:"card input-filed",children:[Object(n.jsx)("div",{className:"card__header",children:"T\u1ea1o b\xe0i vi\u1ebft"}),Object(n.jsx)("div",{className:"card__info",children:Object(n.jsx)("div",{className:"nav-card-info",children:Object(n.jsxs)("div",{className:"nav-info",children:[Object(n.jsx)("div",{className:"avatar",children:Object(n.jsx)("img",{src:p.urlAvatar,alt:"bug"})}),Object(n.jsxs)("div",{className:"info",children:[Object(n.jsx)("b",{children:p.nickname})," ",Object(n.jsx)("br",{}),Object(n.jsx)("span",{children:p.name})]})]})})}),Object(n.jsxs)("div",{className:"card__body",children:[Object(n.jsx)("textarea",{className:"create-input",placeholder:p.name+" \u01a1i, b\u1ea1n \u0111ang ngh\u0129 g\xec th\u1ebf?",value:s,onChange:function(e){i(e.target.value),e.target.value.length>120?e.target.style.fontSize="20px":e.target.style.fontSize="32px",e.target.style.height="auto",e.target.style.height=e.target.scrollHeight+"px"}}),m&&Object(n.jsx)("img",{className:"img__preview",src:m,alt:"load error!"})]}),Object(n.jsxs)("div",{className:"file-field input-field",children:[Object(n.jsxs)("div",{className:"btn",children:[Object(n.jsx)("span",{children:"File"}),Object(n.jsx)("input",{type:"file",accept:"image/*,image/heif,image/heic",onChange:function(e){h(e.target.files[0]);var t=e.target.files[0];if(t){var c=new FileReader;c.onloadend=function(){f(c.result)},c.readAsDataURL(t)}else f(null)}})]}),Object(n.jsx)("div",{className:"file-path-wrapper",children:Object(n.jsx)("input",{className:"file-path validate"})})]}),Object(n.jsx)("div",{children:Object(n.jsx)("button",{className:"btn btn-create",onClick:function(){if(s&&d){var t=new FormData;t.append("file",d),t.append("upload_preset","insta-clone"),t.append("cloud_name","cnq"),fetch("https://api.cloudinary.com/v1_1/ig-clone-44/image/upload",{method:"post",body:t}).then((function(e){return e.json()})).then((function(t){var c;(c=t.secure_url)&&fetch("/api/createPost",{method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({body:s,url:c})}).then((function(e){return e.json()})).then((function(t){t.error?u.a.toast({html:t.error,classes:"#c62828 red darken-3"}):(console.log(t),u.a.toast({html:"Create post success!",classes:"#43a047 green darken-1"}),e.push("/"))})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}else u.a.toast({html:"Please add all the fields!",classes:"#c62828 red darken-3"})},children:"Submit post"})})]})}),w=function(){var e=Object(o.f)(),t=Object(a.useState)(""),c=Object(l.a)(t,2),s=c[0],i=c[1],r=Object(a.useState)(""),j=Object(l.a)(r,2),d=j[0],h=j[1],b=Object(a.useState)(null),O=Object(l.a)(b,2),m=O[0],f=O[1],x=Object(a.useState)({}),g=Object(l.a)(x,2),p=g[0],v=g[1];Object(a.useEffect)((function(){fetch("/api/user",{method:"get",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){v(e)})).catch((function(e){console.log(e)}))}),[]);return Object(n.jsxs)("div",{className:"card input-filed",children:[Object(n.jsx)("div",{className:"card__header",children:"\u0110\u1ed5i \u1ea3nh \u0111\u1ea1i di\u1ec7n"}),Object(n.jsx)("div",{className:"card__info",children:Object(n.jsx)("div",{className:"nav-card-info",children:Object(n.jsxs)("div",{className:"nav-info",children:[Object(n.jsx)("div",{className:"avatar",children:Object(n.jsx)("img",{src:p.urlAvatar,alt:"bug"})}),Object(n.jsxs)("div",{className:"info",children:[Object(n.jsx)("b",{children:p.nickname})," ",Object(n.jsx)("br",{}),Object(n.jsx)("span",{children:p.name})]})]})})}),Object(n.jsxs)("div",{className:"card__body",children:[Object(n.jsx)("textarea",{className:"create-input",placeholder:"H\xe3y n\xf3i g\xec \u0111\xf3 v\u1ec1 \u1ea3nh n\xe0y...",value:s,onChange:function(e){i(e.target.value),e.target.value.length>120?e.target.style.fontSize="20px":e.target.style.fontSize="32px",e.target.style.height="auto",e.target.style.height=e.target.scrollHeight+"px"}}),m&&Object(n.jsx)("img",{className:"img__preview",src:m,alt:"load error!"})]}),Object(n.jsxs)("div",{className:"file-field input-field",children:[Object(n.jsxs)("div",{className:"btn",children:[Object(n.jsx)("span",{children:"File"}),Object(n.jsx)("input",{type:"file",accept:"image/*,image/heif,image/heic",onChange:function(e){h(e.target.files[0]);var t=e.target.files[0];if(t){var c=new FileReader;c.onloadend=function(){f(c.result)},c.readAsDataURL(t)}else f(null)}})]}),Object(n.jsx)("div",{className:"file-path-wrapper",children:Object(n.jsx)("input",{className:"file-path validate"})})]}),Object(n.jsx)("div",{children:Object(n.jsx)("button",{className:"btn btn-create",onClick:function(){if(s&&d){var t=new FormData;t.append("file",d),t.append("upload_preset","insta-clone"),t.append("cloud_name","cnq"),fetch("https://api.cloudinary.com/v1_1/ig-clone-44/image/upload",{method:"post",body:t}).then((function(e){return e.json()})).then((function(t){var c;(c=t.secure_url)&&fetch("/api/changeAvatar",{method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({body:s,url:c})}).then((function(e){return e.json()})).then((function(t){t.error?u.a.toast({html:t.error,classes:"#c62828 red darken-3"}):(console.log(t),u.a.toast({html:"Create post success!",classes:"#43a047 green darken-1"}),e.push("/"))})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}else u.a.toast({html:"Please add all the fields!",classes:"#c62828 red darken-3"})},children:"Submit post"})})]})},k=function(){var e=Object(o.f)(),t=Object(a.useState)(""),c=Object(l.a)(t,2),s=c[0],i=c[1],r=Object(a.useState)({}),j=Object(l.a)(r,2),d=j[0],h=j[1],b=Object(a.useState)({}),O=Object(l.a)(b,2),m=O[0],f=O[1],x=Object(o.g)().id;Object(a.useEffect)((function(){fetch("/api/user",{method:"get",headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){f(e)})).catch((function(e){console.log(e)})),fetch("/api/post/".concat(x),{method:"get",headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){return e?e.error?u.a.toast({html:e.error,classes:"#c62828 red darken-3"}):(h(e),void i(e.body)):u.a.toast({html:"404 Not found!",classes:"#c62828 red darken-3"})})).catch((function(e){console.log(e)}))}),[]);return Object(n.jsxs)("div",{className:"card input-filed",children:[Object(n.jsx)("div",{className:"card__header",children:"S\u1eeda b\xe0i vi\u1ebft"}),Object(n.jsx)("div",{className:"card__info",children:Object(n.jsx)("div",{className:"nav-card-info",children:Object(n.jsxs)("div",{className:"nav-info",children:[Object(n.jsx)("div",{className:"avatar",children:Object(n.jsx)("img",{src:m.urlAvatar,alt:"bug"})}),Object(n.jsxs)("div",{className:"info",children:[Object(n.jsx)("b",{children:m.name})," ",Object(n.jsx)("br",{}),Object(n.jsx)("span",{children:"Long Nguy\u1ec5n"})]})]})})}),Object(n.jsxs)("div",{className:"card__body",children:[Object(n.jsx)("textarea",{className:"create-input",value:s,onChange:function(e){i(e.target.value),e.target.value.length>120?e.target.style.fontSize="20px":e.target.style.fontSize="32px",e.target.style.height="auto",e.target.style.height=e.target.scrollHeight+"px"}}),Object(n.jsx)("img",{className:"img__preview",src:d.photoUrl,alt:"loading..."})]}),Object(n.jsx)("div",{children:Object(n.jsx)("button",{className:"btn btn-create",onClick:function(){if(!s)return u.a.toast({html:"Please add all the fields!",classes:"#c62828 red darken-3"});fetch("/api/post/".concat(x),{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({text:s})}).then((function(e){return e.json()})).then((function(t){t.error?u.a.toast({html:t.error,classes:"#c62828 red darken-3"}):(u.a.toast({html:"Update post success!",classes:"#43a047 green darken-1"}),e.push("/"))})).catch((function(e){console.log(e)}))},style:{marginTop:"25px"},children:"Update post"})})]})},C=function(e,t){return"USER"===t.type?t.payload:"LOGOUT"===t.type?null:e},_=Object(a.createContext)(),I=function(){var e=Object(o.f)();return Object(a.useEffect)((function(){JSON.parse(localStorage.getItem("user"))||e.push("/login")}),[]),Object(n.jsxs)(o.c,{children:[Object(n.jsx)(o.a,{exact:!0,path:"/",children:Object(n.jsx)(g,{})}),Object(n.jsx)(o.a,{exact:!0,path:"/profile",children:Object(n.jsx)(p,{})}),Object(n.jsx)(o.a,{path:"/profile/:id",children:Object(n.jsx)(v,{})}),Object(n.jsx)(o.a,{exact:!0,path:"/create",children:Object(n.jsx)(S,{})}),Object(n.jsx)(o.a,{exact:!0,path:"/changeAvatar",children:Object(n.jsx)(w,{})}),Object(n.jsx)(o.a,{exact:!0,path:"/signup",children:Object(n.jsx)(N,{})}),Object(n.jsx)(o.a,{exact:!0,path:"/login",children:Object(n.jsx)(y,{})}),Object(n.jsx)(o.a,{exact:!0,path:"/updatepost/:id",children:Object(n.jsx)(k,{})})]})};var B=function(){var e=JSON.parse(localStorage.getItem("user")),t=Object(a.useReducer)(C,e||null),c=Object(l.a)(t,2),s=c[0],i=c[1];return Object(n.jsx)(_.Provider,{value:{state:s,dispatch:i},children:Object(n.jsxs)(j.a,{children:[Object(n.jsx)(d,{}),Object(n.jsx)("div",{className:"container-ig mt-54",children:Object(n.jsx)(I,{})})]})})},A=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,40)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;c(e),n(e),a(e),s(e),i(e)}))};r.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(B,{})}),document.getElementById("root")),A()}},[[39,1,2]]]);
//# sourceMappingURL=main.fc41fd42.chunk.js.map