{"version":3,"sources":["Components/Navbar.js","Components/screens/Modal.js","Components/screens/CommentModal.js","Components/ads/Ads.js","Components/screens/Home.js","Components/screens/Profile.js","Components/screens/UserProfile.js","Components/screens/Signup.js","Components/screens/Login.js","Components/screens/CreatePost.js","Components/screens/ChangeAvatar.js","Components/screens/UpdatePost.js","Reducers/userReducer.js","App.js","reportWebVitals.js","index.js"],"names":["NavBar","useContext","UserContext","state","dispatch","useState","keySearch","setKey","users","setUsers","isFocus","setIsFocus","searchOnChange","e","console","log","target","value","trim","fetch","headers","localStorage","getItem","then","res","json","data","catch","err","className","to","id","onFocus","placeholder","onChange","map","user","index","_id","onClick","src","urlAvatar","alt","nickname","name","clear","type","Modal","props","onMessageDelete","setOnMessegeDelete","postFocus","postedBy","followers","includes","isFollowing","setIsFollowing","closeModal","setOnModal","deletePost","idFocus","isPostedByUser","method","body","JSON","stringify","unFollowId","error","followId","setOnCommentModal","deleteComment","cmtIndex","User","isFollow","setIsFollow","Ads","useEffect","key","href","Home","setData","onModal","onCommentModal","setIsPostedByUser","setIdFocus","setpostFocus","setCmtIndex","result","Array","likePost","postId","newData","post","iconLikeOnClick","element","classList","contains","unlikePost","classNameIcon","userId","likes","title","postedById","dotOnClick","onDoubleClick","document","getElementById","iconHeart","style","display","setTimeout","ImageOnDoubleClick","photoUrl","length","comments","comment","text","onSubmit","preventDefault","M","toast","html","classes","Authorization","filter","CommentModal","commentIndex","Profile","myPosts","setMyPosts","setUser","posts","justifyContent","margin","padding","borderBottom","following","myPost","profile","setProfile","useParams","ef","newProfile","Signup","history","useHistory","setName","setNickname","password","setPassword","email","setEmail","selectedOption","setSelectedOption","onValueChange","push","checked","test","message","Login","add","remove","setItem","token","payload","CreatePost","setBody","image","setImage","imgPreview","setImgPreview","fontSize","height","scrollHeight","accept","files","selected","reader","FileReader","onloadend","readAsDataURL","FormData","append","url","secure_url","ChangeAvatar","setPost","marginTop","reducer","action","createContext","Routing","parse","exact","path","UserProfile","UpdatePost","App","useReducer","Provider","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.fc41fd42.chunk.js","sourcesContent":["import React, {useContext, useState} from 'react'\r\nimport {Link} from 'react-router-dom'\r\nimport {UserContext} from '../App'\r\n\r\nconst NavBar = () => {\r\n    const {state, dispatch} = useContext(UserContext)\r\n    const [keySearch, setKey] = useState(\"\")\r\n    const [users, setUsers] = useState([])\r\n    const [isFocus, setIsFocus] = useState(false)\r\n    \r\n    const searchOnChange = (e) => {\r\n        console.log(e.target.value)\r\n        setKey(e.target.value);\r\n        if(e.target.value.trim() !== \"\") {\r\n            fetch(`/api/searchUser?name=${e.target.value}`, {\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                    \"Authorization\": \"Bearer \" + localStorage.getItem('jwt')\r\n                }\r\n            })\r\n                .then(res => res.json())\r\n                .then((data => {\r\n                    setUsers(data)\r\n                    console.log(data)\r\n                }))\r\n                .catch(err => {\r\n                    console.log(err)\r\n                })\r\n        }\r\n    }\r\n\r\n    const renderList = () => {\r\n        if(state) {\r\n            return [\r\n                <li className=\"container-search\"\r\n                    onFocus={() => {setIsFocus(true)}}\r\n                    // onBlur={() => setIsFocus(false)}\r\n                >\r\n                    <input className=\"search-user\" placeholder=\"Tìm kiếm\" value={keySearch}\r\n                        onChange={searchOnChange}\r\n                    >\r\n                    </input>\r\n                    <div className={isFocus ? \"container-user focus\" : \"container-user\"} >\r\n                        {\r\n                            users.map((user, index) => {\r\n                                return (\r\n                                    <Link to={`/profile/${user._id}`} className=\"person\" onClick={() => setIsFocus(false)}>\r\n                                        <div className=\"avatar\">\r\n                                            <img src={user.urlAvatar} alt=\"load...\" />\r\n                                        </div>\r\n                                        <div className=\"info\">\r\n                                            <b>{user.nickname}</b>\r\n                                            <div>{user.name}</div>\r\n                                        </div>\r\n                                    </Link>\r\n                                )\r\n                            })\r\n                        }\r\n                    </div>\r\n                    <div className={isFocus ? \"backgroud-user focus\": \"backgroud-user\"}\r\n                        onClick={() => setIsFocus(false)}\r\n                    >\r\n\r\n                    </div>\r\n                </li>,\r\n                <li className=\"nav-item\" key=\"profile\">\r\n                    <Link to=\"/profile\">Profile</Link>\r\n                </li>,\r\n                <li className=\"nav-item\" key=\"create\">\r\n                    <Link to=\"/create\">Create Post</Link>\r\n                </li>,\r\n                <li className=\"nav-item\" key=\"logout\">\r\n                    <Link to=\"/login\" onClick={()=>{\r\n                        localStorage.clear()\r\n                        dispatch({type: \"LOGOUT\"})\r\n                    }}>Đăng xuất</Link>\r\n                </li>\r\n            ]\r\n        }else {\r\n            return [\r\n                <li className=\"nav-item\" key=\"signup\">\r\n                    <Link to=\"/signup\">Signup</Link>\r\n                </li>,\r\n                <li className=\"nav-item\" key=\"login\">\r\n                    <Link to=\"/login\">Login</Link>\r\n                </li>\r\n            ]\r\n        }\r\n    }\r\n\r\n    return (\r\n        <nav className=\"white navbar\">\r\n            <div className=\"nav-wrapper container-ig\">\r\n                <Link className=\"brand-logo\" to={state? \"/\" : \"/login\"}>Instagram</Link>\r\n                <ul id=\"nav-mobile\" className=\"right hide-on-med-and-down\">\r\n                    {  \r\n                        renderList()\r\n                    }\r\n                </ul>\r\n            </div>\r\n        </nav>\r\n    )\r\n}\r\n\r\nexport default NavBar","import React, { useState, useContext } from 'react'\r\nimport {Link} from 'react-router-dom'\r\n\r\nimport { UserContext } from '../../App'\r\nimport \"../screens_css/Modal.css\"\r\n\r\nconst Modal = (props) => {\r\n    const {state} = useContext(UserContext)\r\n    const [onMessageDelete, setOnMessegeDelete] = useState(false)\r\n    const [isFollowing, setIsFollowing] = useState( props.postFocus.postedBy.followers.includes(state._id) )\r\n\r\n    const closeModal = () => {\r\n        props.setOnModal(false)\r\n    }\r\n\r\n    const onClickDelete = () => {\r\n        props.deletePost(props.idFocus)\r\n        closeModal()\r\n    }\r\n\r\n    const followUser = () => {\r\n        fetch('/api/follow', {\r\n            method: \"put\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Authorization\": \"Bearer \" + localStorage.getItem('jwt')\r\n            },\r\n            body: JSON.stringify({\r\n                followId: props.postFocus.postedBy._id\r\n            })\r\n        })\r\n            .then(res => res.json())\r\n            .then(user => {\r\n                return\r\n            })\r\n            .catch(err => {\r\n                console.log(err)\r\n            })\r\n\r\n        setIsFollowing(true)\r\n    }\r\n\r\n    const unFollowUser = () => {\r\n        fetch('/api/unfollow', {\r\n            method: \"put\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Authorization\": \"Bearer \" + localStorage.getItem('jwt')\r\n            },\r\n            body: JSON.stringify({\r\n                unFollowId: props.postFocus.postedBy._id\r\n            })\r\n        })\r\n            .then(res => res.json())\r\n            .then(user => {\r\n                if(user.error) {\r\n                    return console.log(user.error)\r\n                }\r\n            })\r\n            .catch(err => {\r\n                console.log(err)\r\n            })\r\n\r\n        setIsFollowing(false)\r\n    }\r\n\r\n    return (\r\n        <div className=\"modal-post\">\r\n            <div className=\"modal__overlay\" onClick={closeModal}></div>\r\n            {\r\n                onMessageDelete ?\r\n                    <ul>\r\n                        <li>\r\n                            <div className=\"header__message\">Xoá bài viết?</div>\r\n                            <p className=\"body__message\">\r\n                                Nếu bạn không muốn xoá bài viết này, bạn có thể lưu trữ bài viết.\r\n                                Chỉ bạn mới có thể xem bài viết.\r\n                            </p>\r\n                        </li>\r\n                        <li onClick={onClickDelete} className=\"warnning\">\r\n                            Xoá\r\n                        </li>\r\n                        <li onClick={closeModal}>\r\n                            Huỷ\r\n                        </li>\r\n                    </ul>\r\n                    :\r\n                    <ul>\r\n                        <li className=\"warnning\">Báo cáo</li>\r\n                        {\r\n                            props.isPostedByUser ?\r\n                            [\r\n                                <li className=\"warnning\" onClick={() => setOnMessegeDelete(true)} key=\"delete\">Xoá</li>,\r\n                                <li key=\"update\"><Link to={\"/updatepost/\" + props.idFocus}>Chỉnh sửa bài viết</Link></li>\r\n                            ]\r\n                            :\r\n                            (\r\n                                isFollowing ?\r\n                                    <li className=\"bo-theo-doi\" onClick={unFollowUser}>Bỏ theo dõi</li>\r\n                                :\r\n                                    <li className=\"theo-doi\" onClick={followUser}>Theo dõi</li>\r\n                            )\r\n                                \r\n                        }\r\n                        <li>Chia sẻ</li>\r\n                        <li onClick={closeModal}>Huỷ</li>\r\n                    </ul>\r\n            }\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Modal","import React, { useState } from 'react'\r\n\r\nimport \"../screens_css/Modal.css\"\r\n\r\nconst Modal = (props) => {\r\n    const [onMessageDelete, setOnMessegeDelete] = useState(false)\r\n    const closeModal = () => {\r\n        props.setOnCommentModal(false)\r\n    }\r\n\r\n    const onClickDelete = () => {\r\n        props.deleteComment(props.idFocus, props.cmtIndex)\r\n        closeModal()\r\n    }\r\n\r\n    return (\r\n        <div className=\"modal-post\">\r\n            <div className=\"modal__overlay\" onClick={closeModal}></div>\r\n            {\r\n                onMessageDelete ?\r\n                    <ul>\r\n                        <li>\r\n                            <div className=\"header__message\">Xoá comment</div>\r\n                            <p className=\"body__message\">\r\n                                Bạn có chắc chắn muốn xoá comment này?!! <br/>\r\n                                Sau khi xoá sẽ không thể khôi phục lại.\r\n                            </p>\r\n                        </li>\r\n                        <li onClick={onClickDelete} className=\"warnning\">\r\n                            Xoá\r\n                        </li>\r\n                        <li onClick={closeModal}>\r\n                            Huỷ\r\n                        </li>\r\n                    </ul>\r\n                    :\r\n                    <ul>\r\n                        <li className=\"warnning\" onClick={() => setOnMessegeDelete(true)}>Xoá</li>\r\n                        <li onClick={closeModal}>Huỷ</li>\r\n                    </ul>\r\n            }\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Modal","import React, {useEffect, useState, useContext} from 'react'\r\nimport {Link} from \"react-router-dom\"\r\nimport './Ads.css'\r\nimport { UserContext } from '../../App'\r\n\r\n\r\nconst User = (props) => {\r\n    const { state } = useContext(UserContext)\r\n    const [isFollow, setIsFollow] = useState(props.followers.includes(state._id))\r\n\r\n    const theoDoiOnClick = (e) => {\r\n        fetch('/api/follow', {\r\n            method: \"put\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Authorization\": \"Bearer \" + localStorage.getItem('jwt')\r\n            },\r\n            body: JSON.stringify({\r\n                followId: props._id\r\n            })\r\n        })\r\n            .then(res => res.json())\r\n            .then(user => {\r\n                if(user) {\r\n                    if(user.error) {\r\n                        console.log(\"Follow Error!\")\r\n                    } else {\r\n                        console.log(\"Follow success!\")\r\n                    }\r\n                } else {\r\n                    console.log(\"Follow Error!\")\r\n                }\r\n            })\r\n            .catch(err => {\r\n                console.log(err)\r\n            })\r\n\r\n        setIsFollow(true)\r\n    }\r\n\r\n    const boTheoDoiOnClick = (e) => {\r\n        fetch('/api/unfollow', {\r\n            method: \"put\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Authorization\": \"Bearer \" + localStorage.getItem('jwt')\r\n            },\r\n            body: JSON.stringify({\r\n                unFollowId: props._id\r\n            })\r\n        })\r\n            .then(res => res.json())\r\n            .then(user => {\r\n                if(user) {\r\n                    if(user.error) {\r\n                        console.log(\"Unfollow Error!\")\r\n                    } else {\r\n                        console.log(\"Unfollow success!\")\r\n                    }\r\n                } else {\r\n                    console.log(\"Unfollow Error!\")\r\n                }\r\n            })\r\n            .catch(err => {\r\n                console.log(err)\r\n            })\r\n\r\n        setIsFollow(false)\r\n    }\r\n\r\n    return (\r\n        <div className=\"goiY\">\r\n            <div className=\"person\">\r\n                <div className=\"avatar\">\r\n                    <img src={props.urlAvatar} alt=\"load...\" />\r\n                </div>\r\n                <div className=\"info\">\r\n                    <Link to={`/profile/${props._id}`}>\r\n                        <b>{props.nickname}</b>\r\n                    </Link> <br />\r\n                    <span>{props.name}</span>\r\n                </div>\r\n            </div>\r\n            {\r\n                isFollow ?\r\n                    <div className=\"bo-theo-doi\" onClick={boTheoDoiOnClick}>Bỏ theo dõi</div>\r\n                :\r\n                    <div className=\"theoDoi\" onClick={theoDoiOnClick}>Theo dõi</div>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nconst Ads = () => {\r\n    const [users, setUsers] = useState(null)\r\n\r\n    useEffect(() => {\r\n        fetch('/api/randomuser?amount=3', {\r\n            method: 'get',\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\r\n            }\r\n        })\r\n            .then(data => data.json())\r\n            .then(users => {\r\n                setUsers(users)\r\n            })\r\n            .catch(err => console.log(err))\r\n    }, [])\r\n\r\n    return(\r\n        <div className=\"Ads\">\r\n            <div className=\"personal-page\">\r\n                <div className=\"avatar\">\r\n                    <img src=\"img/info.jpg\" alt=\"bug\" />\r\n                </div>\r\n                <div className=\"info\">\r\n                    <b>longnguyen.442</b> <br/>\r\n                    <span>Long Nguyễn</span>\r\n                </div>\r\n            </div>\r\n            <div className=\"story khung\">\r\n                <div className=\"headerOfKhung\">\r\n                    <div>Tin</div>\r\n                    <div>Xem tất cả</div>\r\n                </div>\r\n                <div className=\"tin\">\r\n                    <div className=\"border-avatar\">\r\n                        <div className=\"avatar\">\r\n                            <img src=\"img/1.jpg\" alt=\"bug\" />\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"info\">\r\n                        <b>diep_bosua_</b> <br />\r\n                        <span>20 PHÚT TRƯỚC</span>\r\n                    </div>\r\n                </div>\r\n                <div className=\"tin\">\r\n                    <div className=\"border-avatar\">\r\n                        <div className=\"avatar\">\r\n                            <img src=\"img/2.jpg\" alt=\"bug\" />\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"info\">\r\n                        <b>kiimyen</b> <br />\r\n                        <span>1 GIỜ TRƯỚC</span>\r\n                    </div>\r\n                </div>\r\n                <div className=\"tin\">\r\n                    <div className=\"border-avatar\">\r\n                        <div className=\"avatar\">\r\n                            <img src=\"img/3.jpg\" alt=\"bug\" />\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"info\">\r\n                        <b>lananh11112000</b> <br />\r\n                        <span>1 NGÀY TRƯỚC</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"suggestions khung\">\r\n                <div className=\"headerOfKhung\">\r\n                    <div>Gợi ý cho bạn</div>\r\n                    <div>Xem tất cả</div>\r\n                </div>\r\n                {\r\n                    users\r\n                    &&\r\n                    users.map(user => {\r\n                        return <User {...user} key={user._id}></User>\r\n                    })\r\n                }\r\n            </div>\r\n            <div className=\"gioiThieu\">\r\n                <ul>\r\n                    <li><a href=\"/\">Giới thiệu</a></li>\r\n                    <li><a href=\"/\">Trợ giúp</a></li>\r\n                    <li><a href=\"/\">Báo chí</a></li>\r\n                    <li><a href=\"/\">API</a></li>\r\n                    <li><a href=\"/\">Việc làm</a></li>\r\n                    <li><a href=\"/\">Quyền riêng tư</a></li>\r\n                    <li><a href=\"/\">Điều khoản</a></li>\r\n                    <li><a href=\"/\">Vị trí</a></li>\r\n                    <li><a href=\"/\">Tài khoản liên quan nhất</a></li>\r\n                    <li><a href=\"/\">Hashtag</a></li>\r\n                    <li><a href=\"/\">Ngôn ngữ</a></li>\r\n                </ul>\r\n                <div>© 2020 INSTAGRAM FROM FACEBOOK</div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Ads","import React, { useEffect, useState, useContext } from 'react'\r\nimport '../screens_css/Home.css'\r\nimport M from 'materialize-css'\r\n\r\nimport { UserContext } from '../../App'\r\n\r\nimport Modal from \"./Modal\"\r\nimport CommentModal from \"./CommentModal\"\r\nimport Ads from '../ads/Ads'\r\nimport { Link } from 'react-router-dom'\r\n\r\nconst Home = () => {\r\n    const { state } = useContext(UserContext)\r\n    const [data, setData] = useState(null)\r\n    const [onModal, setOnModal] = useState(false)\r\n    const [onCommentModal, setOnCommentModal] = useState(false)\r\n    const [isPostedByUser, setIsPostedByUser] = useState(false)\r\n    const [idFocus, setIdFocus] = useState(\"\")\r\n    const [postFocus, setpostFocus] = useState({})\r\n    const [cmtIndex, setCmtIndex] = useState(null)\r\n\r\n    useEffect(() => {\r\n        fetch('/api/subposts', {\r\n            headers: {\r\n                \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\r\n            }\r\n        }).then(res => res.json())\r\n            .then(result => {\r\n                if (result.error) {\r\n                    console.log(result.error)\r\n                } else if (result instanceof Array) {\r\n                    setData(result)\r\n                }\r\n            })\r\n    }, [])\r\n\r\n    const likePost = (id) => {\r\n        fetch('/api/like', {\r\n            method: \"put\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\r\n            },\r\n            body: JSON.stringify({\r\n                postId: id\r\n            })\r\n        }).then(res => res.json())\r\n            .then(result => {\r\n                var newData = data.map(post => {\r\n                    if (post._id === id) {\r\n                        return result\r\n                    } else {\r\n                        return post\r\n                    }\r\n                })\r\n                setData(newData)\r\n            })\r\n    }\r\n\r\n    const unlikePost = (id) => {\r\n        fetch('/api/unlike', {\r\n            method: \"put\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\r\n            },\r\n            body: JSON.stringify({\r\n                postId: id\r\n            })\r\n        }).then(res => res.json())\r\n            .then(result => {\r\n                var newData = data.map(post => {\r\n                    if (post._id === id) {\r\n                        return result\r\n                    } else {\r\n                        return post\r\n                    }\r\n                })\r\n                setData(newData)\r\n            })\r\n    }\r\n\r\n    const iconLikeOnClick = (e, id) => {\r\n        var element = e.target\r\n        if (element.classList.contains(\"far\")) {\r\n            likePost(id)\r\n            element.className = \"fas fa-heart ani-scale1\"\r\n        } else {\r\n            unlikePost(id)\r\n            element.className = \"far fa-heart\"\r\n        }\r\n    }\r\n\r\n    //Hàm thực hiện xoá comment nhận vào id post, index comment \r\n    const deleteComment = (postId, index) => {\r\n        fetch('/api/uncomment', {\r\n            method: \"put\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\r\n            },\r\n            body: JSON.stringify({\r\n                postId: postId,\r\n                commentIndex: index\r\n            })\r\n        })\r\n            .then(res => res.json())\r\n            .then(result => {\r\n                if(!result || result.error){\r\n                    return M.toast({ html: \"delete failed!\", classes: \"#c62828 red darken-3\" })\r\n                }\r\n\r\n                var newData = data.map(post => {\r\n                    if (post._id === postId) {\r\n                        return result\r\n                    } else {\r\n                        return post\r\n                    }\r\n                })\r\n                setData(newData)\r\n            })\r\n            .catch(err => {\r\n                M.toast({ html: \"delete failed!\", classes: \"#c62828 red darken-3\" })\r\n            })\r\n    }\r\n\r\n    const ImageOnDoubleClick = (id) => {\r\n        var element = document.getElementById(id)\r\n        likePost(id)\r\n        element.className = \"fas fa-heart ani-scale1\"\r\n        var iconHeart = document.getElementById(\"idHeart\" + id)\r\n        iconHeart.style.display = \"block\"\r\n        setTimeout(() => iconHeart.style.display = \"none\", 1500)\r\n    }\r\n\r\n    const makeComment = (text, postId) => {\r\n        fetch('/api/comment', {\r\n            method: \"put\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\r\n            },\r\n            body: JSON.stringify({\r\n                postId,\r\n                text\r\n            })\r\n        }).then(res => res.json())\r\n            .then(result => {\r\n                if(!result || result.error) {\r\n                    return M.toast({ html: result.error, classes: \"#c62828 red darken-3\" })\r\n                }\r\n\r\n                const newData = data.map(post => {\r\n                    if (post._id === result._id) {\r\n                        return result\r\n                    } else {\r\n                        return post\r\n                    }\r\n                })\r\n                setData(newData)\r\n            })\r\n            .catch(err => {\r\n                console.log(err)\r\n            })\r\n    }\r\n\r\n    const deletePost = (postId) => {\r\n        fetch(`/api/deletepost/${postId}`, {\r\n            method: \"delete\",\r\n            headers: {\r\n                Authorization: \"Bearer \" + localStorage.getItem(\"jwt\")\r\n            }\r\n        })\r\n            .then(res => res.json())\r\n            .then(result => {\r\n                if (result.err) {\r\n                    M.toast({ html: result.error, classes: \"#c62828 red darken-3\" })\r\n                } else {\r\n                    const newData = data.filter(post => post._id !== postId)\r\n                    setData(newData)\r\n                    M.toast({ html: \"Delete success!\", classes: \"#43a047 green darken-1\" })\r\n                }\r\n            })\r\n    }\r\n\r\n    const dotOnClick = (post) => {\r\n        const id = post._id\r\n        const postedById = post.postedBy._id\r\n        setIdFocus(id)\r\n        setpostFocus(post)\r\n        if (postedById === state._id) {\r\n            setIsPostedByUser(true)\r\n        } else {\r\n            setIsPostedByUser(false)\r\n        }\r\n        setOnModal(true)\r\n    }\r\n\r\n    return (\r\n        <>\r\n        {\r\n            !data ?\r\n            <div className=\"progress\">\r\n                <div className=\"indeterminate\"></div>\r\n            </div>\r\n            :\r\n            <div className=\"home\">\r\n                <div className=\"news-feed\">\r\n                    {\r\n                        data.map(post => {\r\n                            var classNameIcon = \"far fa-heart\"\r\n                            var userId = state._id\r\n                            if (post.likes.includes(userId)) {\r\n                                classNameIcon = \"fas fa-heart ani-scale1\"\r\n                            }\r\n                            return (\r\n                                <div className=\"card home-card\" key={post._id}>\r\n                                    <div className=\"nav-card\">\r\n                                        <div className=\"nav-card-info\">\r\n                                            <Link to={post.postedBy._id === userId ? \"/profile\" : \"/profile/\" + post.postedBy._id}>\r\n                                                <div className=\"info_posted\">\r\n                                                    <div className=\"avatar\">\r\n                                                        <img src={post.postedBy.urlAvatar} alt=\"bug\" />\r\n                                                    </div>\r\n                                                    <div className=\"info\">\r\n                                                        <b>{post.postedBy.name}</b>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </Link>\r\n                                            {\r\n                                                post.title && <span>{post.title}</span>\r\n                                            }\r\n                                        </div>\r\n                                        <i className=\"fas fa-ellipsis-h\" onClick={() => dotOnClick(post)}></i>\r\n                                    </div>\r\n                                    <div className=\"card-image\" onDoubleClick={() => ImageOnDoubleClick(post._id)}>\r\n                                        <img src={post.photoUrl} alt=\"load err\" />\r\n                                        <i className=\"fas fa-heart iconHeart effect1\" id={\"idHeart\" + post._id}></i>\r\n                                    </div>\r\n                                    <div className=\"listIcon\">\r\n                                        <i className={classNameIcon} id={post._id} onClick={(e) => iconLikeOnClick(e, post._id)}></i>\r\n                                        <i className=\"far fa-comment fa-flip-horizontal\"></i>\r\n                                        <i className=\"far fa-paper-plane\"></i>\r\n                                        <i className=\"far fa-bookmark\"></i>\r\n                                    </div>\r\n                                    <div className=\"countLike\">\r\n                                        {post.likes.length} lượt thích\r\n                                </div>\r\n                                    <div className=\"card-content\">\r\n                                        <span className=\"userName\">{post.postedBy.name} </span>\r\n                                        <span className=\"postName\">{post.body}</span>\r\n                                        {\r\n                                            post.comments.map((comment, index) => {\r\n                                                return (\r\n                                                    <h6 key={index} className=\"post-comment\">\r\n                                                        <div className=\"comment-container\">\r\n                                                            <span className=\"userName\">{comment.postedBy.name} </span>\r\n                                                            <span className=\"comment-text\">{comment.text}</span>\r\n                                                        </div>\r\n                                                        {\r\n                                                            comment.postedBy._id === userId &&\r\n                                                            <i className=\"fas fa-ellipsis-h comment-icon\"\r\n                                                                onClick={() => {\r\n                                                                    setOnCommentModal(true)\r\n                                                                    setIdFocus(post._id)\r\n                                                                    setCmtIndex(index)\r\n                                                                }}\r\n                                                            ></i>\r\n                                                        }\r\n                                                    </h6>\r\n                                                )\r\n                                            })\r\n                                        }\r\n                                        <form onSubmit={(e) => {\r\n                                            e.preventDefault()\r\n                                            makeComment(e.target[0].value, post._id)\r\n                                            e.target[0].value = \"\"\r\n                                        }}>\r\n                                            <input type=\"text\" placeholder=\"add a comment\" />\r\n                                        </form>\r\n                                    </div>\r\n                                </div>\r\n                            )\r\n                        })\r\n                    }\r\n                </div>\r\n\r\n                <div className=\"quang-cao\">\r\n                    <div className=\"fixed\">\r\n                        <Ads></Ads>\r\n                    </div>\r\n                </div>\r\n\r\n                {\r\n                    onModal &&\r\n                    <Modal setOnModal={setOnModal}\r\n                        isPostedByUser={isPostedByUser}\r\n                        deletePost={deletePost}\r\n                        idFocus={idFocus}\r\n                        postFocus={postFocus}\r\n                    >\r\n                    </Modal>\r\n                }\r\n                {\r\n                    onCommentModal &&\r\n                    <CommentModal\r\n                        setOnCommentModal={setOnCommentModal}\r\n                        deleteComment={deleteComment}\r\n                        idFocus={idFocus}\r\n                        cmtIndex={cmtIndex}\r\n                    >\r\n                    </CommentModal>\r\n                }\r\n            </div>\r\n        }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Home","import React, { useContext, useEffect, useState } from 'react'\r\nimport '../screens_css/Profile.css'\r\nimport { UserContext } from '../../App'\r\nimport { Link } from 'react-router-dom'\r\n\r\nconst Profile = () => {\r\n    const [myPosts, setMyPosts] = useState(null)\r\n    const [user, setUser] = useState(null)\r\n    const { state } = useContext(UserContext)\r\n\r\n    useEffect(() => {\r\n        fetch(`/api/user/${state._id}`, {\r\n            method: \"get\",\r\n            headers: {\r\n                \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\r\n            }\r\n        })\r\n            .then(res => res.json())\r\n            .then(result => {\r\n                setMyPosts(result.posts)\r\n                setUser(result.user)\r\n            })\r\n            .catch(err => {\r\n                console.log(err)\r\n            })\r\n        // eslint-disable-next-line\r\n    }, [])\r\n\r\n    return (\r\n        <>\r\n            {\r\n                myPosts && user ?\r\n                    <div>\r\n                        <div style={{ display: \"flex\", justifyContent: \"space-around\", margin: \"18px 0px\", padding: \"15px\", borderBottom: \"1px solid #ccc\" }}>\r\n                            <div className=\"khung-avatar\">\r\n                                <img\r\n                                    className=\"avatar\"\r\n                                    src={user.urlAvatar}\r\n                                    alt=\"load error\"\r\n                                />\r\n                                <span><Link to=\"/changeAvatar\"><i className=\"fas fa-camera\"></i></Link></span>\r\n                            </div>\r\n                            <div className=\"thong-tin\">\r\n                                <h4>{user.nickname}</h4>\r\n                                <h6>{user.name}</h6>\r\n                                <div className=\"so-luong\">\r\n                                    <h6>{myPosts.length} bài viết</h6>\r\n                                    <h6>{user.followers.length} người theo dõi</h6>\r\n                                    <h6>Đang theo dõi {user.following.length} người dùng</h6>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"gallery\">\r\n                            <div className=\"row\">\r\n                            {\r\n                                myPosts.map(myPost => {\r\n                                    return (\r\n                                        <div className=\"col s12 m6 l4\" key={myPost._id}>\r\n                                            <img className=\"item\" src={myPost.photoUrl } alt=\"load error\" />\r\n                                        </div>\r\n                                    )\r\n                                })\r\n                            }\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    :\r\n                    <div className=\"progress\">\r\n                        <div className=\"indeterminate\"></div>\r\n                    </div>\r\n            }\r\n        </>\r\n\r\n    )\r\n}\r\n\r\nexport default Profile","import React, { useState, useEffect, useContext } from 'react'\r\nimport '../screens_css/Profile.css'\r\nimport {useParams} from 'react-router-dom'\r\nimport { UserContext } from '../../App'\r\n\r\nimport M from 'materialize-css'\r\n\r\nconst Profile = () => {\r\n    const { state } = useContext(UserContext)\r\n\r\n    const [profile, setProfile] = useState(null)\r\n    const {id} = useParams()\r\n\r\n    useEffect(() => {\r\n        fetch(`/api/user/${id}`, {\r\n            method: \"get\",\r\n            headers: {\r\n                \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\r\n            }\r\n        })\r\n            .then(res => res.json())\r\n            .then(result => {\r\n                if(result.error){\r\n                    M.toast({html: \"Not found!\", classes: \"#c62828 red darken-3\"})\r\n                }else {\r\n                    setProfile(result)\r\n                }\r\n            })\r\n            .catch(err => {\r\n                console.log(err)\r\n            })\r\n            // eslint-disable-next-line\r\n    }, [])\r\n\r\n    const followUser = () => {\r\n        fetch('/api/follow', {\r\n            method: \"put\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Authorization\": \"Bearer \" + localStorage.getItem('jwt')\r\n            },\r\n            body: JSON.stringify({\r\n                followId: id\r\n            })\r\n        })\r\n            .then(res => res.json())\r\n            .then(user => {\r\n                if(!user || user.isFollowing) {\r\n                    return\r\n                }\r\n                var newProfile = {...profile}\r\n                newProfile.user = user\r\n                setProfile(newProfile)\r\n            })\r\n            .catch(err => {\r\n                console.log(err)\r\n            })\r\n    }\r\n\r\n    const unFollowUser = () => {\r\n        fetch('/api/unfollow', {\r\n            method: \"put\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Authorization\": \"Bearer \" + localStorage.getItem('jwt')\r\n            },\r\n            body: JSON.stringify({\r\n                unFollowId: id\r\n            })\r\n        })\r\n            .then(res => res.json())\r\n            .then(user => {\r\n                if(user.error) {\r\n                    return console.log(user.error)\r\n                }\r\n\r\n                var newProfile = {...profile}\r\n                newProfile.user = user\r\n                setProfile(newProfile)\r\n            })\r\n            .catch(err => {\r\n                console.log(err)\r\n            })\r\n    }\r\n\r\n    return (\r\n        <>\r\n        {\r\n            profile ?\r\n            <div>\r\n                <div style={{ display: \"flex\", justifyContent: \"space-around\", margin: \"18px 0px\", padding: \"15px\", borderBottom: \"1px solid #ccc\" }}>\r\n                    <div className=\"khung-avatar\" ef=\"/home\">\r\n                        <img\r\n                            className=\"avatar\"\r\n                            src={profile.user.urlAvatar}\r\n                            alt=\"load error\"\r\n                        />\r\n                    </div>\r\n                    <div className=\"thong-tin\">\r\n                        <div>\r\n                            <div className=\"follow-container\">\r\n                                <h4>{profile.user.nickname}</h4>\r\n                                {\r\n                                    !profile.user.followers.includes(state._id) ?\r\n                                        <div onClick={followUser} className=\"btnFollow btn-follow\">Follow</div>\r\n                                    :\r\n                                        <div onClick={unFollowUser} className=\"btnFollow btn-unfollow\">Unfollow</div>\r\n                                }\r\n                            </div>\r\n                            \r\n                            <h6>{profile.user.name}</h6>\r\n                        </div>\r\n                        <div className=\"so-luong\">\r\n                            <h6>{profile.posts.length} bài viết</h6>\r\n                            <h6>{profile.user.followers.length} người theo dõi</h6>\r\n                            <h6>Đang theo dõi {profile.user.following.length} người dùng</h6>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"gallery\">\r\n                    <div className=\"row\">\r\n                    {\r\n                        profile.posts.map(post => {\r\n                            return (\r\n                                <div className=\"col s12 m6 l4\" key={post._id}>\r\n                                    <img className=\"item\" src={post.photoUrl } alt=\"load error\" />\r\n                                </div>\r\n                            )\r\n                        })\r\n                    }\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            :\r\n            <div className=\"progress\">\r\n                <div className=\"indeterminate\"></div>\r\n            </div>\r\n        }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Profile","import React, { useState, useContext } from 'react'\r\nimport '../screens_css/Signup.css'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport M from 'materialize-css'\r\nimport { UserContext } from '../../App'\r\n\r\nconst Signup = () => {\r\n    const { state } = useContext(UserContext)\r\n    const history = useHistory();\r\n    const [name, setName] = useState(\"\")\r\n    const [nickname, setNickname] = useState(\"\")\r\n    const [password, setPassword] = useState(\"\")\r\n    const [email, setEmail] = useState(\"\")\r\n    const [selectedOption, setSelectedOption] = useState(\"Nam\")\r\n\r\n    const postData = () => {\r\n        var re = /^[\\w-.]+@([\\w-]+\\.)+[\\w-]{2,4}$/\r\n        if (re.test(email) === false) {\r\n            M.toast({ html: \"Invalid email\", classes: \"#c62828 red darken-3\" })\r\n            return\r\n        }\r\n\r\n        if(!name || !email || !password || !nickname) {\r\n            M.toast({ html: \"Please add all the fields\", classes: \"#c62828 red darken-3\" })\r\n            return\r\n        }\r\n\r\n        fetch(\"api/signup\", {\r\n            method: \"post\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify({\r\n                name,\r\n                nickname,\r\n                email,\r\n                password,\r\n                selectedOption\r\n            })\r\n        }).then(res => res.json())\r\n            .then(data => {\r\n                if (data.error) {\r\n                    M.toast({ html: data.error, classes: \"#c62828 red darken-3\" })\r\n                }\r\n                else {\r\n                    M.toast({ html: data.message, classes: \"#43a047 green darken-1\" })\r\n                    history.push('/login')\r\n                }\r\n            })\r\n    }\r\n\r\n    const onValueChange = (e) => {\r\n        setSelectedOption(e.target.value)\r\n    }\r\n\r\n    if (state) {\r\n        history.push(\"/\")\r\n    }\r\n\r\n    return (\r\n        <div className=\"card card-signup\">\r\n            <h1>Instagram</h1>\r\n            <input\r\n                type=\"email\"\r\n                placeholder=\"Email\"\r\n                value={email}\r\n                onChange={(e) => setEmail(e.target.value)}\r\n            />\r\n            <input\r\n                type=\"text\"\r\n                placeholder=\"Tên đầy đủ\"\r\n                value={name}\r\n                onChange={(e) => setName(e.target.value)}\r\n            />\r\n            <input\r\n                type=\"text\"\r\n                placeholder=\"Tên người dùng\"\r\n                value={nickname}\r\n                onChange={(e) => setNickname(e.target.value)}\r\n            />\r\n            <input\r\n                type=\"password\"\r\n                placeholder=\"Password\"\r\n                value={password}\r\n                onChange={(e) => setPassword(e.target.value)}\r\n            />\r\n            <div className=\"select-gender\">\r\n                <label>Giới tính</label>\r\n                <label>\r\n                    <input className=\"with-gap\" name=\"group1\" type=\"radio\" \r\n                        value=\"Nam\"\r\n                        checked={selectedOption === \"Nam\"}\r\n                        onChange={onValueChange}\r\n                    />\r\n                    <span>Nam</span>\r\n                </label>\r\n                <label>\r\n                    <input className=\"with-gap\" name=\"group1\" type=\"radio\" \r\n                        value=\"Nu\"\r\n                        checked={selectedOption === \"Nu\"}\r\n                        onChange={onValueChange}\r\n                    />\r\n                    <span>Nữ</span>\r\n                </label>\r\n                <label>\r\n                    <input className=\"with-gap\" name=\"group1\" type=\"radio\" \r\n                        value=\"Khac\"\r\n                        checked={selectedOption === \"Khac\"}\r\n                        onChange={onValueChange}\r\n                    />\r\n                    <span>Khác</span>\r\n                </label>\r\n            </div>\r\n            <button className=\"btn waves-effect waves-light #64b5f6 blue lighten-2 btn-signup\" onClick={postData} >Signup</button>\r\n            <div className=\"gach-ngang\"></div>\r\n            <Link to=\"/login\">Bạn đã có tài khoản?</Link>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Signup","import React, { useState, useContext, useEffect } from 'react'\r\nimport '../screens_css/Login.css'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport { UserContext } from '../../App'\r\nimport M from 'materialize-css'\r\n\r\nconst Login = () => {\r\n    const { state, dispatch } = useContext(UserContext)\r\n    const history = useHistory()\r\n    const [password, setPassword] = useState(\"\")\r\n    const [email, setEmail] = useState(\"\")\r\n\r\n    const postData = (e) => {\r\n        e.target.classList.add(\"none-even\")\r\n        var re = /^[\\w-.]+@([\\w-]+\\.)+[\\w-]{2,4}$/\r\n        if (re.test(email) === false) {\r\n            M.toast({ html: \"Invalid email\", classes: \"#c62828 red darken-3\" })\r\n            e.target.classList.remove(\"none-even\")\r\n            return;\r\n        }\r\n\r\n        fetch(\"/api/login\", {\r\n            method: \"post\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify({\r\n                email,\r\n                password\r\n            })\r\n        })\r\n            .then(res => res.json())\r\n            .then(data => {\r\n                if (data.error) {\r\n                    M.toast({ html: data.error, classes: \"#c62828 red darken-3\" })\r\n                    e.target.classList.remove(\"none-even\")\r\n                }\r\n                else {\r\n                    M.toast({ html: \"Login success\", classes: \"#43a047 green darken-1\" })\r\n                    localStorage.setItem(\"jwt\", data.token)\r\n                    localStorage.setItem(\"user\", JSON.stringify(data.user))\r\n                    dispatch({ type: \"USER\", payload: data.user })\r\n                    history.push('/')\r\n                }\r\n            })\r\n    }\r\n\r\n    useEffect(() => {\r\n        if(state) {\r\n            history.push('/')\r\n        }\r\n        // eslint-disable-next-line\r\n    }, [])\r\n\r\n    return (\r\n        <div className=\"card card-login\">\r\n            <h1>Instagram</h1>\r\n            <input\r\n                type=\"email\"\r\n                placeholder=\"Your email\"\r\n                value={email}\r\n                onChange={(e) => setEmail(e.target.value)}\r\n            />\r\n            <input\r\n                type=\"password\"\r\n                placeholder=\"Password\"\r\n                value={password}\r\n                onChange={(e) => setPassword(e.target.value)}\r\n            />\r\n            <button className=\"btn waves-effect waves-light #64b5f6 blue lighten-2 btn-login\" onClick={postData}>Login</button>\r\n            <div className=\"gach-ngang\"></div>\r\n            <Link to=\"/signup\">Bạn chưa có tài khoản?</Link>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Login","import React, { useState, useEffect } from 'react'\r\nimport M from 'materialize-css'\r\nimport { useHistory } from 'react-router-dom'\r\nimport '../screens_css/CreatePost.css'\r\n\r\nconst CreatePost = () => {\r\n    const history = useHistory()\r\n    const [body, setBody] = useState(\"\")\r\n    const [image, setImage] = useState(\"\")\r\n    const [imgPreview, setImgPreview] = useState(null)\r\n    const [user, setUser] = useState({})\r\n\r\n    useEffect(() => {\r\n        fetch(\"/api/user\", {\r\n            method: \"get\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\r\n            }\r\n        })\r\n            .then(res => res.json())\r\n            .then(result => {\r\n                setUser(result)\r\n            })\r\n            .catch(err => {\r\n                console.log(err)\r\n            })\r\n    }, [])\r\n\r\n    const createPost = (url) => {\r\n        if (url) {\r\n            fetch(\"/api/createPost\", {\r\n                method: \"post\",\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                    \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\r\n                },\r\n                body: JSON.stringify({\r\n                    body,\r\n                    url\r\n                })\r\n            }).then(res => res.json())\r\n                .then((data) => {\r\n                    if (data.error) {\r\n                        M.toast({ html: data.error, classes: \"#c62828 red darken-3\" })\r\n                    }\r\n                    else {\r\n                        console.log(data)\r\n                        M.toast({ html: \"Create post success!\", classes: \"#43a047 green darken-1\" })\r\n                        history.push('/')\r\n                    }\r\n                })\r\n                .catch(err => {\r\n                    console.log(err)\r\n                })\r\n        }\r\n    }\r\n\r\n    const postDetails = () => {\r\n        if (!body || !image) {\r\n            M.toast({ html: \"Please add all the fields!\", classes: \"#c62828 red darken-3\" })\r\n            return\r\n        }\r\n\r\n        const data = new FormData()\r\n        data.append(\"file\", image)\r\n        data.append(\"upload_preset\", \"insta-clone\")\r\n        data.append(\"cloud_name\", \"cnq\")\r\n\r\n        //Post ảnh lên cloudinary\r\n        fetch(\"https://api.cloudinary.com/v1_1/ig-clone-44/image/upload\", {\r\n            method: \"post\",\r\n            body: data,\r\n        })\r\n            .then(res => res.json())\r\n            .then(data => {\r\n                createPost(data.secure_url)\r\n            })\r\n            .catch(err => {\r\n                console.log(err)\r\n            })\r\n    }\r\n\r\n    const handleImageChange = (e) => {\r\n        setImage(e.target.files[0])\r\n        const selected = e.target.files[0]\r\n        if (selected) {\r\n            let reader = new FileReader()\r\n            reader.onloadend = () => {\r\n                setImgPreview(reader.result)\r\n            }\r\n            reader.readAsDataURL(selected)\r\n        } else {\r\n            setImgPreview(null)\r\n        }\r\n    }\r\n\r\n    const textAreaOnChange = (e) => {\r\n        setBody(e.target.value)\r\n    \r\n        if(e.target.value.length > 120) {\r\n            e.target.style.fontSize = \"20px\"\r\n        } else {\r\n            e.target.style.fontSize = \"32px\"\r\n        }\r\n        e.target.style.height = \"auto\"\r\n        e.target.style.height = e.target.scrollHeight + \"px\"\r\n    }\r\n\r\n    return (\r\n        <div className=\"card input-filed\">\r\n            <div className=\"card__header\">Tạo bài viết</div>\r\n            <div className=\"card__info\">\r\n                <div className=\"nav-card-info\">\r\n                    <div className=\"nav-info\">\r\n                        <div className=\"avatar\">\r\n                            <img src={user.urlAvatar} alt=\"bug\" />\r\n                        </div>\r\n                        <div className=\"info\">\r\n                            <b>{user.nickname}</b> <br />\r\n                            <span>{user.name}</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"card__body\">\r\n                <textarea\r\n                    className=\"create-input\"\r\n                    placeholder={user.name + \" ơi, bạn đang nghĩ gì thế?\"}\r\n                    value={body}\r\n                    onChange={textAreaOnChange}\r\n                >\r\n                </textarea>\r\n                {\r\n                    imgPreview &&\r\n                    <img\r\n                        className=\"img__preview\"\r\n                        src={imgPreview}\r\n                        alt=\"load error!\"\r\n                    />\r\n                }\r\n            </div>\r\n            <div className=\"file-field input-field\">\r\n                <div className=\"btn\">\r\n                    <span>File</span>\r\n                    <input type=\"file\"\r\n                        accept=\"image/*,image/heif,image/heic\"\r\n                        onChange={handleImageChange}\r\n                    />\r\n                </div>\r\n                <div className=\"file-path-wrapper\">\r\n                    <input className=\"file-path validate\" />\r\n                </div>\r\n            </div>\r\n\r\n            <div>\r\n                <button className=\"btn btn-create\" onClick={postDetails}>\r\n                    Submit post\r\n                </button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CreatePost","import React, {useState, useEffect} from 'react'\r\nimport M from 'materialize-css'\r\nimport {useHistory} from 'react-router-dom'\r\n// import '../screens_css/CreatePost.css'\r\n\r\nconst ChangeAvatar = () => {\r\n    const history = useHistory()\r\n    const [body, setBody] = useState(\"\")\r\n    const [image, setImage] = useState(\"\")\r\n    const [imgPreview, setImgPreview] = useState(null)\r\n    const [user, setUser] = useState({})\r\n\r\n    useEffect(() => {\r\n        fetch(\"/api/user\", {\r\n            method: \"get\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\r\n            }\r\n        })\r\n            .then(res => res.json())\r\n            .then(result => {\r\n                setUser(result)\r\n            })\r\n            .catch(err => {\r\n                console.log(err)\r\n            })\r\n    }, [])\r\n\r\n    const createPost = (url) => {\r\n        if(url) {\r\n            fetch(\"/api/changeAvatar\", {\r\n                method: \"post\",\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                    \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\r\n                },\r\n                body: JSON.stringify({\r\n                    body,\r\n                    url\r\n                })\r\n            }).then(res => res.json())\r\n            .then((data) => {\r\n                if(data.error) {\r\n                    M.toast({html: data.error, classes: \"#c62828 red darken-3\"})\r\n                }\r\n                else {\r\n                    console.log(data)\r\n                    M.toast({html: \"Create post success!\", classes: \"#43a047 green darken-1\"})\r\n                    history.push('/')\r\n                }\r\n            })\r\n            .catch(err => {\r\n                console.log(err)\r\n            })\r\n        }\r\n    }\r\n\r\n    const postDetails = () => {\r\n        if(!body || !image) {\r\n            M.toast({html: \"Please add all the fields!\", classes: \"#c62828 red darken-3\"})\r\n            return\r\n        }\r\n\r\n        const data = new FormData()\r\n        data.append(\"file\", image)\r\n        data.append(\"upload_preset\", \"insta-clone\")\r\n        data.append(\"cloud_name\", \"cnq\")\r\n\r\n        //Post ảnh lên cloudinary\r\n        fetch(\"https://api.cloudinary.com/v1_1/ig-clone-44/image/upload\", {\r\n            method: \"post\",\r\n            body: data,\r\n        })\r\n        .then(res => res.json())\r\n        .then(data => {\r\n            createPost(data.secure_url)\r\n        })\r\n        .catch(err => {\r\n            console.log(err)\r\n        })\r\n    }\r\n\r\n    const handleImageChange = (e) => {\r\n        setImage(e.target.files[0])\r\n        const selected = e.target.files[0]\r\n        if(selected) {\r\n            let reader = new FileReader()\r\n            reader.onloadend = () => {\r\n                setImgPreview(reader.result)\r\n            }\r\n            reader.readAsDataURL(selected)\r\n        }else {\r\n            setImgPreview(null)\r\n        }\r\n    }\r\n\r\n    const textAreaOnChange = (e) => {\r\n        setBody(e.target.value)\r\n    \r\n        if(e.target.value.length > 120) {\r\n            e.target.style.fontSize = \"20px\"\r\n        } else {\r\n            e.target.style.fontSize = \"32px\"\r\n        }\r\n        e.target.style.height = \"auto\"\r\n        e.target.style.height = e.target.scrollHeight + \"px\"\r\n    }\r\n\r\n    return (\r\n        <div className=\"card input-filed\">\r\n            <div className=\"card__header\">Đổi ảnh đại diện</div>\r\n            <div className=\"card__info\">\r\n                <div className=\"nav-card-info\">\r\n                    <div className=\"nav-info\">\r\n                        <div className=\"avatar\">\r\n                            <img src={user.urlAvatar} alt=\"bug\" />\r\n                        </div>\r\n                        <div className=\"info\">\r\n                            <b>{user.nickname}</b> <br />\r\n                            <span>{user.name}</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"card__body\">\r\n                <textarea\r\n                    className=\"create-input\"\r\n                    placeholder=\"Hãy nói gì đó về ảnh này...\"\r\n                    value={body}\r\n                    onChange={textAreaOnChange}\r\n                >\r\n                </textarea>\r\n                {\r\n                    imgPreview &&\r\n                    <img \r\n                    className=\"img__preview\"\r\n                    src={imgPreview}\r\n                    alt=\"load error!\"\r\n                />\r\n                }\r\n            </div>\r\n            <div className=\"file-field input-field\">\r\n                <div className=\"btn\">\r\n                    <span>File</span>\r\n                    <input type=\"file\"\r\n                        accept=\"image/*,image/heif,image/heic\"\r\n                        onChange={handleImageChange}\r\n                    />\r\n                </div>\r\n                <div className=\"file-path-wrapper\">\r\n                    <input className=\"file-path validate\" />\r\n                </div>\r\n            </div>\r\n\r\n            <div>\r\n                <button className=\"btn btn-create\" onClick={postDetails}>\r\n                    Submit post\r\n                </button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ChangeAvatar","import React, { useState, useEffect } from 'react'\r\nimport M from 'materialize-css'\r\nimport { useHistory, useParams } from 'react-router-dom'\r\nimport '../screens_css/CreatePost.css'\r\n\r\nconst CreatePost = () => {\r\n    const history = useHistory()\r\n    const [body, setBody] = useState(\"\")\r\n    const [post, setPost] = useState({})\r\n    const [user, setUser] = useState({})\r\n\r\n    const {id} = useParams()\r\n\r\n    useEffect(() => {\r\n        fetch(\"/api/user\", {\r\n            method: \"get\",\r\n            headers: {\r\n                \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\r\n            }\r\n        })\r\n            .then(res => res.json())\r\n            .then(result => {\r\n                setUser(result)\r\n            })\r\n            .catch(err => {\r\n                console.log(err)\r\n            })\r\n\r\n        //Load post\r\n        fetch(`/api/post/${id}`, {\r\n            method: 'get',\r\n            headers: {\r\n                \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\r\n            }\r\n        })\r\n            .then(res => res.json())\r\n            .then(result => {\r\n                if(!result) {\r\n                    return M.toast({ html: \"404 Not found!\", classes: \"#c62828 red darken-3\" })\r\n                }\r\n                if(result.error){\r\n                    return M.toast({ html: result.error, classes: \"#c62828 red darken-3\" })\r\n                }\r\n\r\n                setPost(result)\r\n                setBody(result.body)\r\n            })\r\n            .catch(err => {\r\n                console.log(err)\r\n            })\r\n\r\n            // eslint-disable-next-line\r\n    }, [])\r\n\r\n    const updatePost = () => {\r\n        if(!body) {\r\n            return M.toast({ html: \"Please add all the fields!\", classes: \"#c62828 red darken-3\" })\r\n        }\r\n\r\n        fetch(`/api/post/${id}`, {\r\n            method: \"put\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\r\n            },\r\n            body: JSON.stringify({\r\n                text: body\r\n            })\r\n        })\r\n            .then(res => res.json())\r\n            .then((data) => {\r\n                if (data.error) {\r\n                    M.toast({ html: data.error, classes: \"#c62828 red darken-3\" })\r\n                }\r\n                else {\r\n                    M.toast({ html: \"Update post success!\", classes: \"#43a047 green darken-1\" })\r\n                    history.push('/')\r\n                }\r\n            })\r\n            .catch(err => {\r\n                console.log(err)\r\n            })\r\n    }\r\n\r\n    const textAreaOnChange = (e) => {\r\n        setBody(e.target.value)\r\n    \r\n        if(e.target.value.length > 120) {\r\n            e.target.style.fontSize = \"20px\"\r\n        } else {\r\n            e.target.style.fontSize = \"32px\"\r\n        }\r\n        e.target.style.height = \"auto\"\r\n        e.target.style.height = e.target.scrollHeight + \"px\"\r\n    }\r\n\r\n    return (\r\n        <div className=\"card input-filed\">\r\n            <div className=\"card__header\">Sửa bài viết</div>\r\n            <div className=\"card__info\">\r\n                <div className=\"nav-card-info\">\r\n                    <div className=\"nav-info\">\r\n                        <div className=\"avatar\">\r\n                            <img src={user.urlAvatar} alt=\"bug\" />\r\n                        </div>\r\n                        <div className=\"info\">\r\n                            <b>{user.name}</b> <br />\r\n                            <span>Long Nguyễn</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"card__body\">\r\n                <textarea\r\n                    className=\"create-input\"\r\n                    value={body}\r\n                    onChange={textAreaOnChange}\r\n                >\r\n                </textarea>\r\n                <img\r\n                    className=\"img__preview\"\r\n                    src={post.photoUrl}\r\n                    alt=\"loading...\"\r\n                />\r\n            </div>\r\n\r\n            <div>\r\n                <button className=\"btn btn-create\"\r\n                    onClick={updatePost}\r\n                    style={{marginTop: \"25px\"}}\r\n                >\r\n                    Update post\r\n                </button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CreatePost","export const initialState = null\r\n\r\nexport const reducer = (state, action) => {\r\n    if(action.type === \"USER\") {\r\n        return action.payload\r\n    }else if(action.type === \"LOGOUT\") {\r\n        return null\r\n    }\r\n    return state\r\n}","import './App.css'\r\n\r\nimport { BrowserRouter, Route, Switch, useHistory } from 'react-router-dom'\r\nimport { createContext, useEffect, useReducer } from 'react'\r\n\r\nimport NavBar from './Components/Navbar'\r\nimport Home from './Components/screens/Home'\r\nimport Profile from './Components/screens/Profile'\r\nimport UserProfile from './Components/screens/UserProfile'\r\nimport Signup from './Components/screens/Signup'\r\nimport Login from './Components/screens/Login'\r\nimport CreatePost from './Components/screens/CreatePost'\r\nimport ChangeAvatar from './Components/screens/ChangeAvatar'\r\nimport UpdatePost from './Components/screens/UpdatePost'\r\nimport { reducer, initialState } from './Reducers/userReducer'\r\n\r\nexport const UserContext = createContext()\r\n\r\nconst Routing = () => {\r\n  const history = useHistory()\r\n  useEffect(() => {\r\n    const user = JSON.parse(localStorage.getItem(\"user\"))\r\n    if (!user) {\r\n      history.push('/login')\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [])\r\n\r\n  return (\r\n    <Switch>\r\n      <Route exact path=\"/\">\r\n        <Home />\r\n      </Route>\r\n      <Route exact path=\"/profile\">\r\n        <Profile />\r\n      </Route>\r\n      <Route path=\"/profile/:id\">\r\n        <UserProfile />\r\n      </Route>\r\n      <Route exact path=\"/create\">\r\n        <CreatePost />\r\n      </Route>\r\n      <Route exact path=\"/changeAvatar\">\r\n        <ChangeAvatar />\r\n      </Route>\r\n      <Route exact path=\"/signup\">\r\n        <Signup />\r\n      </Route>\r\n      <Route exact path=\"/login\">\r\n        <Login />\r\n      </Route>\r\n      <Route exact path=\"/updatepost/:id\">\r\n        <UpdatePost />\r\n      </Route>\r\n    </Switch>\r\n  )\r\n}\r\n\r\nfunction App() {\r\n  const user = JSON.parse(localStorage.getItem(\"user\"))\r\n  const [state, dispatch] = useReducer(reducer, user || initialState)\r\n\r\n  return (\r\n    <UserContext.Provider value={{ state, dispatch }}>\r\n      <BrowserRouter>\r\n        <NavBar />\r\n        <div className=\"container-ig mt-54\">\r\n          <Routing></Routing>\r\n        </div>\r\n      </BrowserRouter>\r\n    </UserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}