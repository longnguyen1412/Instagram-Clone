(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{19:function(e,t,c){},20:function(e,t,c){},21:function(e,t,c){},29:function(e,t,c){},30:function(e,t,c){},35:function(e,t,c){},36:function(e,t,c){},37:function(e,t,c){},38:function(e,t,c){},39:function(e,t,c){"use strict";c.r(t);var a=c(0),s=c(1),n=c.n(s),i=c(22),r=c.n(i),l=(c(29),c(2)),o=(c(30),c(5)),j=c(4),d=function(){var e=Object(s.useContext)(w),t=e.state,c=e.dispatch;return Object(a.jsx)("nav",{className:"white navbar",children:Object(a.jsxs)("div",{className:"nav-wrapper container-ig",children:[Object(a.jsx)(j.b,{className:"brand-logo",to:t?"/":"/login",children:"Instagram"}),Object(a.jsx)("ul",{id:"nav-mobile",className:"right hide-on-med-and-down",children:t?[Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(j.b,{to:"/profile",children:"Profile"})},"profile"),Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(j.b,{to:"/create",children:"Create Post"})},"create"),Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(j.b,{to:"/login",onClick:function(){localStorage.clear(),c({type:"LOGOUT"})},children:"\u0110\u0103ng xu\u1ea5t"})},"logout")]:[Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(j.b,{to:"/signup",children:"Signup"})},"signup"),Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(j.b,{to:"/login",children:"Login"})},"login")]})]})})},h=(c(35),c(3)),b=c.n(h),u=(c(19),function(e){var t=Object(s.useState)(!1),c=Object(l.a)(t,2),n=c[0],i=c[1],r=function(){e.setOnModal(!1)};return Object(a.jsxs)("div",{className:"modal-post",children:[Object(a.jsx)("div",{className:"modal__overlay",onClick:r}),n?Object(a.jsxs)("ul",{children:[Object(a.jsxs)("li",{children:[Object(a.jsx)("div",{className:"header__message",children:"Xo\xe1 b\xe0i vi\u1ebft?"}),Object(a.jsx)("p",{className:"body__message",children:"N\u1ebfu b\u1ea1n kh\xf4ng mu\u1ed1n xo\xe1 b\xe0i vi\u1ebft n\xe0y, b\u1ea1n c\xf3 th\u1ec3 l\u01b0u tr\u1eef b\xe0i vi\u1ebft. Ch\u1ec9 b\u1ea1n m\u1edbi c\xf3 th\u1ec3 xem b\xe0i vi\u1ebft."})]}),Object(a.jsx)("li",{onClick:function(){e.deletePost(e.idFocus),r()},className:"warnning",children:"Xo\xe1"}),Object(a.jsx)("li",{onClick:r,children:"Hu\u1ef7"})]}):Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{className:"warnning",children:"B\xe1o c\xe1o"}),e.isPostedByUser?[Object(a.jsx)("li",{className:"warnning",onClick:function(){return i(!0)},children:"Xo\xe1"},"delete"),Object(a.jsx)("li",{children:Object(a.jsx)(j.b,{to:"/updatepost/"+e.idFocus,children:"Ch\u1ec9nh s\u1eeda b\xe0i vi\u1ebft"})},"update")]:Object(a.jsx)("li",{className:"warnning",children:"B\u1ecf theo d\xf5i"}),Object(a.jsx)("li",{children:"Chia s\u1ebb"}),Object(a.jsx)("li",{onClick:r,children:"Hu\u1ef7"})]})]})}),O=function(e){var t=Object(s.useState)(!1),c=Object(l.a)(t,2),n=c[0],i=c[1],r=function(){e.setOnCommentModal(!1)};return Object(a.jsxs)("div",{className:"modal-post",children:[Object(a.jsx)("div",{className:"modal__overlay",onClick:r}),n?Object(a.jsxs)("ul",{children:[Object(a.jsxs)("li",{children:[Object(a.jsx)("div",{className:"header__message",children:"Xo\xe1 comment"}),Object(a.jsxs)("p",{className:"body__message",children:["B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n xo\xe1 comment n\xe0y?!! ",Object(a.jsx)("br",{}),"Sau khi xo\xe1 s\u1ebd kh\xf4ng th\u1ec3 kh\xf4i ph\u1ee5c l\u1ea1i."]})]}),Object(a.jsx)("li",{onClick:function(){e.deleteComment(e.idFocus,e.cmtIndex),r()},className:"warnning",children:"Xo\xe1"}),Object(a.jsx)("li",{onClick:r,children:"Hu\u1ef7"})]}):Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{className:"warnning",onClick:function(){return i(!0)},children:"Xo\xe1"}),Object(a.jsx)("li",{onClick:r,children:"Hu\u1ef7"})]})]})},m=(c(36),function(){return Object(a.jsxs)("div",{className:"Ads",children:[Object(a.jsxs)("div",{className:"personal-page",children:[Object(a.jsx)("div",{className:"avatar",children:Object(a.jsx)("img",{src:"img/info.jpg",alt:"bug"})}),Object(a.jsxs)("div",{className:"info",children:[Object(a.jsx)("b",{children:"longnguyen.442"})," ",Object(a.jsx)("br",{}),Object(a.jsx)("span",{children:"Long Nguy\u1ec5n"})]})]}),Object(a.jsxs)("div",{className:"story khung",children:[Object(a.jsxs)("div",{className:"headerOfKhung",children:[Object(a.jsx)("div",{children:"Tin"}),Object(a.jsx)("div",{children:"Xem t\u1ea5t c\u1ea3"})]}),Object(a.jsxs)("div",{className:"tin",children:[Object(a.jsx)("div",{className:"border-avatar",children:Object(a.jsx)("div",{className:"avatar",children:Object(a.jsx)("img",{src:"img/avt-diep.jpg",alt:"bug"})})}),Object(a.jsxs)("div",{className:"info",children:[Object(a.jsx)("b",{children:"diep_bosua_"})," ",Object(a.jsx)("br",{}),Object(a.jsx)("span",{children:"20 PH\xdaT TR\u01af\u1edaC"})]})]}),Object(a.jsxs)("div",{className:"tin",children:[Object(a.jsx)("div",{className:"border-avatar",children:Object(a.jsx)("div",{className:"avatar",children:Object(a.jsx)("img",{src:"img/KY-avatar.jpg",alt:"bug"})})}),Object(a.jsxs)("div",{className:"info",children:[Object(a.jsx)("b",{children:"kiimyen"})," ",Object(a.jsx)("br",{}),Object(a.jsx)("span",{children:"1 GI\u1edc TR\u01af\u1edaC"})]})]}),Object(a.jsxs)("div",{className:"tin",children:[Object(a.jsx)("div",{className:"border-avatar",children:Object(a.jsx)("div",{className:"avatar",children:Object(a.jsx)("img",{src:"img/la.jpg",alt:"bug"})})}),Object(a.jsxs)("div",{className:"info",children:[Object(a.jsx)("b",{children:"lananh11112000"})," ",Object(a.jsx)("br",{}),Object(a.jsx)("span",{children:"1 NG\xc0Y TR\u01af\u1edaC"})]})]})]}),Object(a.jsxs)("div",{className:"suggestions khung",children:[Object(a.jsxs)("div",{className:"headerOfKhung",children:[Object(a.jsx)("div",{children:"G\u1ee3i \xfd cho b\u1ea1n"}),Object(a.jsx)("div",{children:"Xem t\u1ea5t c\u1ea3"})]}),Object(a.jsxs)("div",{className:"goiY",children:[Object(a.jsxs)("div",{className:"person",children:[Object(a.jsx)("div",{className:"avatar",children:Object(a.jsx)("img",{src:"img/avtThao.jpg",alt:"bug"})}),Object(a.jsxs)("div",{className:"info",children:[Object(a.jsx)("b",{children:"thao.106520"})," ",Object(a.jsx)("br",{}),Object(a.jsx)("span",{children:"B\u1ea1n b\xe8 tr\xean Facebook"})]})]}),Object(a.jsx)("div",{className:"theoDoi",children:"Theo d\xf5i"})]}),Object(a.jsxs)("div",{className:"goiY",children:[Object(a.jsxs)("div",{className:"person",children:[Object(a.jsx)("div",{className:"avatar",children:Object(a.jsx)("img",{src:"img/avtThao.jpg",alt:"bug"})}),Object(a.jsxs)("div",{className:"info",children:[Object(a.jsx)("b",{children:"thao.106520"})," ",Object(a.jsx)("br",{}),Object(a.jsx)("span",{children:"B\u1ea1n b\xe8 tr\xean Facebook"})]})]}),Object(a.jsx)("div",{className:"theoDoi",children:"Theo d\xf5i"})]}),Object(a.jsxs)("div",{className:"goiY",children:[Object(a.jsxs)("div",{className:"person",children:[Object(a.jsx)("div",{className:"avatar",children:Object(a.jsx)("img",{src:"img/avtThao.jpg",alt:"bug"})}),Object(a.jsxs)("div",{className:"info",children:[Object(a.jsx)("b",{children:"thao.106520"})," ",Object(a.jsx)("br",{}),Object(a.jsx)("span",{children:"B\u1ea1n b\xe8 tr\xean Facebook"})]})]}),Object(a.jsx)("div",{className:"theoDoi",children:"Theo d\xf5i"})]})]}),Object(a.jsxs)("div",{className:"gioiThieu",children:[Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{children:Object(a.jsx)("a",{href:"/",children:"Gi\u1edbi thi\u1ec7u"})}),Object(a.jsx)("li",{children:Object(a.jsx)("a",{href:"/",children:"Tr\u1ee3 gi\xfap"})}),Object(a.jsx)("li",{children:Object(a.jsx)("a",{href:"/",children:"B\xe1o ch\xed"})}),Object(a.jsx)("li",{children:Object(a.jsx)("a",{href:"/",children:"API"})}),Object(a.jsx)("li",{children:Object(a.jsx)("a",{href:"/",children:"Vi\u1ec7c l\xe0m"})}),Object(a.jsx)("li",{children:Object(a.jsx)("a",{href:"/",children:"Quy\u1ec1n ri\xeang t\u01b0"})}),Object(a.jsx)("li",{children:Object(a.jsx)("a",{href:"/",children:"\u0110i\u1ec1u kho\u1ea3n"})}),Object(a.jsx)("li",{children:Object(a.jsx)("a",{href:"/",children:"V\u1ecb tr\xed"})}),Object(a.jsx)("li",{children:Object(a.jsx)("a",{href:"/",children:"T\xe0i kho\u1ea3n li\xean quan nh\u1ea5t"})}),Object(a.jsx)("li",{children:Object(a.jsx)("a",{href:"/",children:"Hashtag"})}),Object(a.jsx)("li",{children:Object(a.jsx)("a",{href:"/",children:"Ng\xf4n ng\u1eef"})})]}),Object(a.jsx)("div",{children:"\xa9 2020 INSTAGRAM FROM FACEBOOK"})]})]})}),x=function(){var e=Object(s.useContext)(w).state,t=Object(s.useState)(null),c=Object(l.a)(t,2),n=c[0],i=c[1],r=Object(s.useState)(!1),o=Object(l.a)(r,2),d=o[0],h=o[1],x=Object(s.useState)(!1),f=Object(l.a)(x,2),g=f[0],p=f[1],v=Object(s.useState)(!1),N=Object(l.a)(v,2),y=N[0],S=N[1],k=Object(s.useState)(""),C=Object(l.a)(k,2),_=C[0],B=C[1],I=Object(s.useState)(null),T=Object(l.a)(I,2),A=T[0],F=T[1];Object(s.useEffect)((function(){fetch("/allpost",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){e.error?console.log(e.error):e instanceof Array&&i(e)}))}),[]);var z=function(e){fetch("/like",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:e})}).then((function(e){return e.json()})).then((function(t){var c=n.map((function(c){return c._id===e?t:c}));i(c)}))},L=function(e,t){var c=e.target;c.classList.contains("far")?(z(t),c.className="fas fa-heart ani-scale1"):(!function(e){fetch("/unlike",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:e})}).then((function(e){return e.json()})).then((function(t){var c=n.map((function(c){return c._id===e?t:c}));i(c)}))}(t),c.className="far fa-heart")};return Object(a.jsx)(a.Fragment,{children:n?Object(a.jsxs)("div",{className:"home",children:[Object(a.jsx)("div",{className:"news-feed",children:n.map((function(t){var c="far fa-heart",s=e._id;return t.likes.includes(s)&&(c="fas fa-heart ani-scale1"),Object(a.jsxs)("div",{className:"card home-card",children:[Object(a.jsxs)("div",{className:"nav-card",children:[Object(a.jsxs)("div",{className:"nav-card-info",children:[Object(a.jsx)(j.b,{to:t.postedBy._id===s?"/profile":"/profile/"+t.postedBy._id,children:Object(a.jsxs)("div",{className:"info_posted",children:[Object(a.jsx)("div",{className:"avatar",children:Object(a.jsx)("img",{src:t.postedBy.urlAvatar,alt:"bug"})}),Object(a.jsx)("div",{className:"info",children:Object(a.jsx)("b",{children:t.postedBy.name})})]})}),t.title&&Object(a.jsx)("span",{children:t.title})]}),Object(a.jsx)("i",{className:"fas fa-ellipsis-h",onClick:function(){return c=t.postedBy._id,a=t._id,B(a),c===e._id?S(!0):S(!1),void h(!0);var c,a}})]}),Object(a.jsxs)("div",{className:"card-image",onDoubleClick:function(){return function(e){var t=document.getElementById(e);z(e),t.className="fas fa-heart ani-scale1";var c=document.getElementById("idHeart"+e);c.style.display="block",setTimeout((function(){return c.style.display="none"}),1500)}(t._id)},children:[Object(a.jsx)("img",{src:t.photoUrl,alt:"load err"}),Object(a.jsx)("i",{className:"fas fa-heart iconHeart effect1",id:"idHeart"+t._id})]}),Object(a.jsxs)("div",{className:"listIcon",children:[Object(a.jsx)("i",{className:c,id:t._id,onClick:function(e){return L(e,t._id)}}),Object(a.jsx)("i",{className:"far fa-comment fa-flip-horizontal"}),Object(a.jsx)("i",{className:"far fa-paper-plane"}),Object(a.jsx)("i",{className:"far fa-bookmark"})]}),Object(a.jsxs)("div",{className:"countLike",children:[t.likes.length," l\u01b0\u1ee3t th\xedch"]}),Object(a.jsxs)("div",{className:"card-content",children:[Object(a.jsxs)("span",{className:"userName",children:[t.postedBy.name," "]}),Object(a.jsx)("span",{className:"postName",children:t.body}),t.comments.map((function(e,c){return Object(a.jsxs)("h6",{className:"post-comment",children:[Object(a.jsxs)("div",{className:"comment-container",children:[Object(a.jsxs)("span",{className:"userName",children:[e.postedBy.name," "]}),Object(a.jsx)("span",{className:"comment-text",children:e.text})]}),e.postedBy._id===s&&Object(a.jsx)("i",{className:"fas fa-ellipsis-h comment-icon",onClick:function(){p(!0),B(t._id),F(c)}})]},c)})),Object(a.jsx)("form",{onSubmit:function(e){var c,a;e.preventDefault(),c=e.target[0].value,a=t._id,fetch("/comment",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:a,text:c})}).then((function(e){return e.json()})).then((function(e){if(!e||e.error)return b.a.toast({html:e.error,classes:"#c62828 red darken-3"});var t=n.map((function(t){return t._id===e._id?e:t}));i(t)})).catch((function(e){console.log(e)})),e.target[0].value=""},children:Object(a.jsx)("input",{type:"text",placeholder:"add a comment"})})]})]},t._id)}))}),Object(a.jsx)("div",{className:"quang-cao",children:Object(a.jsx)("div",{className:"fixed",children:Object(a.jsx)(m,{})})}),d&&Object(a.jsx)(u,{setOnModal:h,isPostedByUser:y,deletePost:function(e){fetch("/deletepost/".concat(e),{method:"delete",headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(t){if(t.err)b.a.toast({html:t.error,classes:"#c62828 red darken-3"});else{var c=n.filter((function(t){return t._id!==e}));i(c),b.a.toast({html:"Delete success!",classes:"#43a047 green darken-1"})}}))},idFocus:_}),g&&Object(a.jsx)(O,{setOnCommentModal:p,deleteComment:function(e,t){fetch("/uncomment",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:e,commentIndex:t})}).then((function(e){return e.json()})).then((function(t){if(!t||t.error)return b.a.toast({html:"delete failed!",classes:"#c62828 red darken-3"});var c=n.map((function(c){return c._id===e?t:c}));i(c)})).catch((function(e){b.a.toast({html:"delete failed!",classes:"#c62828 red darken-3"})}))},idFocus:_,cmtIndex:A})]}):Object(a.jsx)("div",{className:"progress",children:Object(a.jsx)("div",{className:"indeterminate"})})})},f=(c(20),function(){var e=Object(s.useState)(null),t=Object(l.a)(e,2),c=t[0],n=t[1],i=Object(s.useState)(null),r=Object(l.a)(i,2),o=r[0],d=r[1],h=Object(s.useContext)(w).state;return Object(s.useEffect)((function(){fetch("/user/".concat(h._id),{method:"get",headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){n(e.posts),d(e.user)})).catch((function(e){console.log(e)}))}),[]),Object(a.jsx)(a.Fragment,{children:c&&o?Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",margin:"18px 0px",padding:"15px",borderBottom:"1px solid #ccc"},children:[Object(a.jsxs)("div",{className:"khung-avatar",children:[Object(a.jsx)("img",{className:"avatar",src:o.urlAvatar,alt:"load error"}),Object(a.jsx)("span",{children:Object(a.jsx)(j.b,{to:"/changeAvatar",children:Object(a.jsx)("i",{className:"fas fa-camera"})})})]}),Object(a.jsxs)("div",{className:"thong-tin",children:[Object(a.jsx)("h4",{children:o.name}),Object(a.jsxs)("div",{className:"so-luong",children:[Object(a.jsxs)("h6",{children:[c.length," posts"]}),Object(a.jsxs)("h6",{children:[o.followers.length," followers"]}),Object(a.jsxs)("h6",{children:[o.following.length," following"]})]})]})]}),Object(a.jsx)("div",{className:"gallery",children:c.map((function(e){return Object(a.jsx)("img",{className:"item",src:e.photoUrl,alt:"load error"})}))})]}):Object(a.jsx)("div",{className:"progress",children:Object(a.jsx)("div",{className:"indeterminate"})})})}),g=c(16),p=function(){var e=Object(s.useContext)(w).state,t=Object(s.useState)(null),c=Object(l.a)(t,2),n=c[0],i=c[1],r=Object(o.g)().id;Object(s.useEffect)((function(){fetch("/user/".concat(r),{method:"get",headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){e.error?b.a.toast({html:"Not found!",classes:"#c62828 red darken-3"}):i(e)})).catch((function(e){console.log(e)}))}),[]);return Object(a.jsx)(a.Fragment,{children:n?Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",margin:"18px 0px",padding:"15px",borderBottom:"1px solid #ccc"},children:[Object(a.jsx)("div",{className:"khung-avatar",ef:"/home",children:Object(a.jsx)("img",{className:"avatar",src:n.user.urlAvatar,alt:"load error"})}),Object(a.jsxs)("div",{className:"thong-tin",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("h4",{children:n.user.name}),n.user.followers.includes(e._id)?Object(a.jsx)("button",{onClick:function(){fetch("/unfollow",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({unFollowId:r})}).then((function(e){return e.json()})).then((function(e){if(e.error)return console.log(e.error);var t=Object(g.a)({},n);t.user=e,i(t)})).catch((function(e){console.log(e)}))},children:"Unfollow"}):Object(a.jsx)("button",{onClick:function(){fetch("/follow",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({followId:r})}).then((function(e){return e.json()})).then((function(e){var t=Object(g.a)({},n);t.user=e,i(t)})).catch((function(e){console.log(e)}))},children:"Follow"})]}),Object(a.jsxs)("div",{className:"so-luong",children:[Object(a.jsxs)("h6",{children:[n.posts.length," post"]}),Object(a.jsxs)("h6",{children:[n.user.followers.length," followers"]}),Object(a.jsxs)("h6",{children:[n.user.following.length," following"]})]})]})]}),Object(a.jsx)("div",{className:"gallery",children:n.posts.map((function(e){return Object(a.jsx)("img",{className:"item",src:e.photoUrl,alt:"load error"})}))})]}):Object(a.jsx)("div",{class:"progress",children:Object(a.jsx)("div",{class:"indeterminate"})})})},v=(c(37),function(){var e=Object(s.useContext)(w).state,t=Object(o.f)(),c=Object(s.useState)(""),n=Object(l.a)(c,2),i=n[0],r=n[1],d=Object(s.useState)(""),h=Object(l.a)(d,2),u=h[0],O=h[1],m=Object(s.useState)(""),x=Object(l.a)(m,2),f=x[0],g=x[1],p=Object(s.useState)("Nam"),v=Object(l.a)(p,2),N=v[0],y=v[1],S=function(e){console.log(e.target.value),y(e.target.value)};return e&&t.push("/"),Object(a.jsxs)("div",{className:"card card-signup",children:[Object(a.jsx)("h1",{children:"Instagram"}),Object(a.jsx)("input",{className:"input-name",type:"text",placeholder:"Your name",value:i,onChange:function(e){return r(e.target.value)}}),Object(a.jsx)("input",{type:"email",placeholder:"Your email",value:f,onChange:function(e){return g(e.target.value)}}),Object(a.jsx)("input",{type:"password",placeholder:"Password",value:u,onChange:function(e){return O(e.target.value)}}),Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{children:"Gi\u1edbi t\xednh"}),Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{className:"with-gap",name:"group1",type:"radio",value:"Nam",checked:"Nam"===N,onChange:S}),Object(a.jsx)("span",{children:"Nam"})]}),Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{className:"with-gap",name:"group1",type:"radio",value:"Nu",checked:"Nu"===N,onChange:S}),Object(a.jsx)("span",{children:"Nu"})]}),Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{class:"with-gap",name:"group1",type:"radio",value:"Khac",checked:"Khac"===N,onChange:S}),Object(a.jsx)("span",{children:"Kh\xe1c"})]})]}),Object(a.jsx)("button",{className:"btn waves-effect waves-light #64b5f6 blue lighten-2 btn-signup",onClick:function(){!1!==/^[\w-.]+@([\w-]+\.)+[\w-]{2,4}$/.test(f)?i&&f&&u?fetch("/signup",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:i,email:f,password:u,selectedOption:N})}).then((function(e){return e.json()})).then((function(e){e.error?b.a.toast({html:e.error,classes:"#c62828 red darken-3"}):(b.a.toast({html:e.message,classes:"#43a047 green darken-1"}),t.push("/login"))})):b.a.toast({html:"Please add all the fields",classes:"#c62828 red darken-3"}):b.a.toast({html:"Invalid email",classes:"#c62828 red darken-3"})},children:"Signup"}),Object(a.jsx)("div",{className:"gach-ngang"}),Object(a.jsx)(j.b,{to:"/login",children:"B\u1ea1n \u0111\xe3 c\xf3 t\xe0i kho\u1ea3n?"})]})}),N=(c(38),function(){var e=Object(s.useContext)(w),t=e.state,c=e.dispatch,n=Object(o.f)(),i=Object(s.useState)(""),r=Object(l.a)(i,2),d=r[0],h=r[1],u=Object(s.useState)(""),O=Object(l.a)(u,2),m=O[0],x=O[1];return Object(s.useEffect)((function(){t&&n.push("/")}),[]),Object(a.jsxs)("div",{className:"card card-login",children:[Object(a.jsx)("h1",{children:"Instagram"}),Object(a.jsx)("input",{type:"email",placeholder:"Your email",value:m,onChange:function(e){return x(e.target.value)}}),Object(a.jsx)("input",{type:"password",placeholder:"Password",value:d,onChange:function(e){return h(e.target.value)}}),Object(a.jsx)("button",{className:"btn waves-effect waves-light #64b5f6 blue lighten-2 btn-login",onClick:function(e){e.target.classList.add("none-even");if(!1===/^[\w-.]+@([\w-]+\.)+[\w-]{2,4}$/.test(m))return b.a.toast({html:"Invalid email",classes:"#c62828 red darken-3"}),void e.target.classList.remove("none-even");fetch("/login",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:m,password:d})}).then((function(e){return e.json()})).then((function(t){t.error?(b.a.toast({html:t.error,classes:"#c62828 red darken-3"}),e.target.classList.remove("none-even")):(b.a.toast({html:"Login success",classes:"#43a047 green darken-1"}),localStorage.setItem("jwt",t.token),localStorage.setItem("user",JSON.stringify(t.user)),c({type:"USER",payload:t.user}),n.push("/"))}))},children:"Login"}),Object(a.jsx)("div",{className:"gach-ngang"}),Object(a.jsx)(j.b,{to:"/signup",children:"B\u1ea1n ch\u01b0a c\xf3 t\xe0i kho\u1ea3n?"})]})}),y=(c(21),function(){var e=Object(o.f)(),t=Object(s.useState)(""),c=Object(l.a)(t,2),n=c[0],i=c[1],r=Object(s.useState)(""),j=Object(l.a)(r,2),d=j[0],h=j[1],u=Object(s.useState)(null),O=Object(l.a)(u,2),m=O[0],x=O[1],f=Object(s.useState)({}),g=Object(l.a)(f,2),p=g[0],v=g[1];Object(s.useEffect)((function(){fetch("/user",{method:"get",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){v(e)})).catch((function(e){console.log(e)}))}),[]);return Object(a.jsxs)("div",{className:"card input-filed",children:[Object(a.jsx)("div",{className:"card__header",children:"T\u1ea1o b\xe0i vi\u1ebft"}),Object(a.jsx)("div",{className:"card__info",children:Object(a.jsx)("div",{className:"nav-card-info",children:Object(a.jsxs)("div",{className:"nav-info",children:[Object(a.jsx)("div",{className:"avatar",children:Object(a.jsx)("img",{src:p.urlAvatar,alt:"bug"})}),Object(a.jsxs)("div",{className:"info",children:[Object(a.jsx)("b",{children:p.name})," ",Object(a.jsx)("br",{}),Object(a.jsx)("span",{children:"Long Nguy\u1ec5n"})]})]})})}),Object(a.jsxs)("div",{className:"card__body",children:[Object(a.jsx)("textarea",{className:"create-input",placeholder:p.name+" \u01a1i, b\u1ea1n \u0111ang ngh\u0129 g\xec th\u1ebf?",value:n,onChange:function(e){i(e.target.value),e.target.value.length>120?e.target.style.fontSize="20px":e.target.style.fontSize="32px",e.target.style.height="auto",e.target.style.height=e.target.scrollHeight+"px"}}),m&&Object(a.jsx)("img",{className:"img__preview",src:m,alt:"load error!"})]}),Object(a.jsxs)("div",{className:"file-field input-field",children:[Object(a.jsxs)("div",{className:"btn",children:[Object(a.jsx)("span",{children:"File"}),Object(a.jsx)("input",{type:"file",accept:"image/*,image/heif,image/heic",onChange:function(e){h(e.target.files[0]);var t=e.target.files[0];if(t){var c=new FileReader;c.onloadend=function(){x(c.result)},c.readAsDataURL(t)}else x(null)}})]}),Object(a.jsx)("div",{className:"file-path-wrapper",children:Object(a.jsx)("input",{className:"file-path validate"})})]}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{className:"btn btn-create",onClick:function(){if(n&&d){var t=new FormData;t.append("file",d),t.append("upload_preset","insta-clone"),t.append("cloud_name","cnq"),fetch("https://api.cloudinary.com/v1_1/ig-clone-44/image/upload",{method:"post",body:t}).then((function(e){return e.json()})).then((function(t){var c;console.log(t),(c=t.url)&&fetch("/createPost",{method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({body:n,url:c})}).then((function(e){return e.json()})).then((function(t){t.error?b.a.toast({html:t.error,classes:"#c62828 red darken-3"}):(console.log(t),b.a.toast({html:"Create post success!",classes:"#43a047 green darken-1"}),e.push("/"))})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}else b.a.toast({html:"Please add all the fields!",classes:"#c62828 red darken-3"})},children:"Submit post"})})]})}),S=function(){var e=Object(o.f)(),t=Object(s.useState)(""),c=Object(l.a)(t,2),n=c[0],i=c[1],r=Object(s.useState)(""),j=Object(l.a)(r,2),d=j[0],h=j[1],u=Object(s.useState)(null),O=Object(l.a)(u,2),m=O[0],x=O[1],f=Object(s.useState)({}),g=Object(l.a)(f,2),p=g[0],v=g[1];Object(s.useEffect)((function(){fetch("/user",{method:"get",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){v(e)})).catch((function(e){console.log(e)}))}),[]);return Object(a.jsxs)("div",{className:"card input-filed",children:[Object(a.jsx)("div",{className:"card__header",children:"\u0110\u1ed5i \u1ea3nh \u0111\u1ea1i di\u1ec7n"}),Object(a.jsx)("div",{className:"card__info",children:Object(a.jsx)("div",{className:"nav-card-info",children:Object(a.jsxs)("div",{className:"nav-info",children:[Object(a.jsx)("div",{className:"avatar",children:Object(a.jsx)("img",{src:p.urlAvatar,alt:"bug"})}),Object(a.jsxs)("div",{className:"info",children:[Object(a.jsx)("b",{children:p.name})," ",Object(a.jsx)("br",{}),Object(a.jsx)("span",{children:"Long Nguy\u1ec5n"})]})]})})}),Object(a.jsxs)("div",{className:"card__body",children:[Object(a.jsx)("textarea",{className:"create-input",placeholder:"H\xe3y n\xf3i g\xec \u0111\xf3 v\u1ec1 \u1ea3nh n\xe0y...",value:n,onChange:function(e){i(e.target.value),e.target.value.length>120?e.target.style.fontSize="20px":e.target.style.fontSize="32px",e.target.style.height="auto",e.target.style.height=e.target.scrollHeight+"px"}}),m&&Object(a.jsx)("img",{className:"img__preview",src:m,alt:"load error!"})]}),Object(a.jsxs)("div",{className:"file-field input-field",children:[Object(a.jsxs)("div",{className:"btn",children:[Object(a.jsx)("span",{children:"File"}),Object(a.jsx)("input",{type:"file",accept:"image/*,image/heif,image/heic",onChange:function(e){h(e.target.files[0]);var t=e.target.files[0];if(t){var c=new FileReader;c.onloadend=function(){x(c.result)},c.readAsDataURL(t)}else x(null)}})]}),Object(a.jsx)("div",{className:"file-path-wrapper",children:Object(a.jsx)("input",{className:"file-path validate"})})]}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{className:"btn btn-create",onClick:function(){if(n&&d){var t=new FormData;t.append("file",d),t.append("upload_preset","insta-clone"),t.append("cloud_name","cnq"),fetch("https://api.cloudinary.com/v1_1/ig-clone-44/image/upload",{method:"post",body:t}).then((function(e){return e.json()})).then((function(t){var c;console.log(t),(c=t.url)&&fetch("/changeAvatar",{method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({body:n,url:c})}).then((function(e){return e.json()})).then((function(t){t.error?b.a.toast({html:t.error,classes:"#c62828 red darken-3"}):(console.log(t),b.a.toast({html:"Create post success!",classes:"#43a047 green darken-1"}),e.push("/"))})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}else b.a.toast({html:"Please add all the fields!",classes:"#c62828 red darken-3"})},children:"Submit post"})})]})},k=function(){var e=Object(o.f)(),t=Object(s.useState)(""),c=Object(l.a)(t,2),n=c[0],i=c[1],r=Object(s.useState)({}),j=Object(l.a)(r,2),d=j[0],h=j[1],u=Object(s.useState)({}),O=Object(l.a)(u,2),m=O[0],x=O[1],f=Object(o.g)().id;Object(s.useEffect)((function(){fetch("/user",{method:"get",headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){x(e)})).catch((function(e){console.log(e)})),fetch("/post/".concat(f),{method:"get",headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){return e?e.error?b.a.toast({html:e.error,classes:"#c62828 red darken-3"}):(h(e),void i(e.body)):b.a.toast({html:"404 Not found!",classes:"#c62828 red darken-3"})})).catch((function(e){console.log(e)}))}),[]);return Object(a.jsxs)("div",{className:"card input-filed",children:[Object(a.jsx)("div",{className:"card__header",children:"S\u1eeda b\xe0i vi\u1ebft"}),Object(a.jsx)("div",{className:"card__info",children:Object(a.jsx)("div",{className:"nav-card-info",children:Object(a.jsxs)("div",{className:"nav-info",children:[Object(a.jsx)("div",{className:"avatar",children:Object(a.jsx)("img",{src:m.urlAvatar,alt:"bug"})}),Object(a.jsxs)("div",{className:"info",children:[Object(a.jsx)("b",{children:m.name})," ",Object(a.jsx)("br",{}),Object(a.jsx)("span",{children:"Long Nguy\u1ec5n"})]})]})})}),Object(a.jsxs)("div",{className:"card__body",children:[Object(a.jsx)("textarea",{className:"create-input",value:n,onChange:function(e){i(e.target.value),e.target.value.length>120?e.target.style.fontSize="20px":e.target.style.fontSize="32px",e.target.style.height="auto",e.target.style.height=e.target.scrollHeight+"px"}}),Object(a.jsx)("img",{className:"img__preview",src:d.photoUrl,alt:"loading..."})]}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{className:"btn btn-create",onClick:function(){if(!n)return b.a.toast({html:"Please add all the fields!",classes:"#c62828 red darken-3"});fetch("/post/".concat(f),{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({text:n})}).then((function(e){return e.json()})).then((function(t){t.error?b.a.toast({html:t.error,classes:"#c62828 red darken-3"}):(b.a.toast({html:"Update post success!",classes:"#43a047 green darken-1"}),e.push("/"))})).catch((function(e){console.log(e)}))},style:{marginTop:"25px"},children:"Update post"})})]})},C=function(e,t){return"USER"===t.type?t.payload:"LOGOUT"===t.type?null:e},w=Object(s.createContext)(),_=function(){var e=Object(o.f)();return Object(s.useEffect)((function(){JSON.parse(localStorage.getItem("user"))||e.push("/login")}),[]),Object(a.jsxs)(o.c,{children:[Object(a.jsx)(o.a,{exact:!0,path:"/",children:Object(a.jsx)(x,{})}),Object(a.jsx)(o.a,{exact:!0,path:"/profile",children:Object(a.jsx)(f,{})}),Object(a.jsx)(o.a,{path:"/profile/:id",children:Object(a.jsx)(p,{})}),Object(a.jsx)(o.a,{exact:!0,path:"/create",children:Object(a.jsx)(y,{})}),Object(a.jsx)(o.a,{exact:!0,path:"/changeAvatar",children:Object(a.jsx)(S,{})}),Object(a.jsx)(o.a,{exact:!0,path:"/signup",children:Object(a.jsx)(v,{})}),Object(a.jsx)(o.a,{exact:!0,path:"/login",children:Object(a.jsx)(N,{})}),Object(a.jsx)(o.a,{exact:!0,path:"/updatepost/:id",children:Object(a.jsx)(k,{})})]})};var B=function(){var e=JSON.parse(localStorage.getItem("user")),t=Object(s.useReducer)(C,e||null),c=Object(l.a)(t,2),n=c[0],i=c[1];return Object(a.jsx)(w.Provider,{value:{state:n,dispatch:i},children:Object(a.jsxs)(j.a,{children:[Object(a.jsx)(d,{}),Object(a.jsx)("div",{className:"container-ig mt-54",children:Object(a.jsx)(_,{})})]})})},I=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,40)).then((function(t){var c=t.getCLS,a=t.getFID,s=t.getFCP,n=t.getLCP,i=t.getTTFB;c(e),a(e),s(e),n(e),i(e)}))};r.a.render(Object(a.jsx)(n.a.StrictMode,{children:Object(a.jsx)(B,{})}),document.getElementById("root")),I()}},[[39,1,2]]]);
//# sourceMappingURL=main.834fef0c.chunk.js.map